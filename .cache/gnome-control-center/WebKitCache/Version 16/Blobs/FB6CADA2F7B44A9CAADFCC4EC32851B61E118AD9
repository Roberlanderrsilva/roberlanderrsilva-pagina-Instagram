!function(){function e(e){function t(e){return e&&e.state==l&&(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),D==e&&(D=e.next),$==e&&($=e.prev),e.state=u,e.prev=e.next=null,y--),e}function a(e){if(e&&e.state==u){var r=$;r?(r.next=e,e.prev=r):D=e,$=e,e.state=l,y++}}function f(){!q&&!b&&y&&x>w&&(b=window.setTimeout(g,s))}function v(e){var r=(new Date).getTime()-e<i;return r}function g(){var e=(new Date).getTime();for(b=0,q=!0;y>0&&x>w;){var r=D;if(r&&x>w?(o.assert(r.state===l,"Task was not in a pending state and we were just about to execute it."),r=m(t(r))):r=null,r&&!v(e)){break
}}q=!1,f()}function m(e){if(e){o.assert(void 0!=e.id&&!A[e.id],"Task didn't have an id or was already active!"),w++,A[e.id]=e,e.startTime=(new Date).getTime(),e.state=c;var r=e.exec(function(r){T(e,r)});r||T(e)}return e}function T(e,r){e.state===c&&(w--,o.assert(A[e.id],"A task is being completed without being in the active task list."),delete A[e.id],r&&"number"==typeof r?(e.state=d,e.timeoutId=window.setTimeout(function(){h(e)},r)):h(e))}function h(e){var r=k;e.state=p,delete r[e.id],f()}var C=this,x=e||n,y=0,w=0,b=0,I=0,k={},D=null,$=null,A={},R=!1,q=!1;
C.enqueue=function(e,n,i){var s=!1;if(!R){i=i||String(I++);var u=k,c=u[i];(!c||c.state==l&&c.next)&&(c?t(c):(o.assert(!A[i],"An active task was found during an enqueue that wasn't in the queue list."),s=!0,c=u[i]=new r(e,n,i)),a(c),f())}return s},C.abortAll=function(){R=!0;C.abort(),R=!1,o.assert(0==y,"After abortAll, _pendingTaskCount should be 0. (Was "+y+")"),o.assert(0==w,"After abortAll, _activeTaskCount should be 0. (Was "+w+")")},C.abort=function(){var e=k;if(e){for(taskId in e){o.assert(e.hasOwnProperty(taskId),"priorityQueue::abort ran across a property in queue that wasn't a task id.");
var r=e[taskId];r.state==c?(T(r),r.abort&&r.abort()):r.state==d?(r.timeoutId&&clearTimeout(r.timeoutId),h(r)):t(r)}k={}}},C.getActiveTaskCount=function(){return w},C.getActiveTasks=function(){return A}}function r(e,r,t){var a=this;a.id=t,a.exec=e,a.abort=r,a.timeoutId=0,a.next=null,a.prev=null,a.state=u}var t=window,a=t.wLive,o=(a.Core,t.$Debug),n=1,i=25,s=0,u=0,l=1,c=2,d=3,p=4,f=1;r.prototype={"id":"","queueId":"","exec":function(){},"abort":function(){},"timeoutId":0,"next":null,"prev":null,"state":u},t.requests=new e(f),$Do.register("wLive.Core.TaskQueue",0,!0)
}(),$Do.when("wLive.Core.TaskQueue",function(){function e(e,r,t){r&&t&&(e[r]=t)}function r(e,r,t){void 0!==t&&(e[r]=t)}function t(t,a,o,n,i,p,v,j,L,H){function N(e,r){var t={};if(500==e.status){try{t=JSON.parse(e.responseText)||{}}catch(a){}}if(!t.error&&!t.items){var o=!0,n=!1,i=y;switch(t.pageStats={"url":J,"error":r,"tasks":[],"executionTimeMs":0,"schedulerTimeMs":0},r){case"timeout":i=y,n=!0;break;case"abort":i=w,o=!1,t.pageStats.info=r,t.pageStats.error=null}t.error={"isRetriable":o,"code":i,"message":"","debugMessage":"(xhr status "+e.status+") xhr.responseText: "+e.responseText,"stackTrace":"","isFatal":n}
}return t}function O(e,r){var t,a=e?e.error:null;if(_=l(),e=e||{},d&&d.PageStats&&e.pageStats&&d.PageStats.add(e.pageStats,K),e.apiCanary&&(f.apiCanary=e.apiCanary,delete e.apiCanary),e.telemetryContext?($ClientTelemetry.updateTelemetryContext(e.telemetryContext),delete e.telemetryContext):e.tcxt&&($ClientTelemetry.updateTelemetryContext(e.tcxt),delete e.tcxt),e.error){e.error.telemetryContext?($ClientTelemetry.updateTelemetryContext(e.error.telemetryContext),delete e.error.telemetryContext):e.error.tcxt&&($ClientTelemetry.updateTelemetryContext(e.error.tcxt),delete e.error.tcxt),t=e.error.stackTrace,t=t&&t.encodeJson?t.encodeJson():"";
var o='{"code": "'+e.error.code+'", "message": "'+e.error.message+'", "debug": "'+e.error.debugMessage+'", "stacktrace": "'+t+'", "retriesLeft": "'+z+'", "requestUrl": "'+J+'"}';M.push(o),M.length>q&&M.shift()}if(e.error&&e.error.isRetriable&&z>0){W&&W(),F&&$ReportEvent.ReportApiCall({"apiId":F,"errorCode":e.error.code,"success":!1}),z--,Q.start()}else{e.error?(W&&W(Q.failureReentranceDelay),e.error.code!=w&&(F&&$ReportEvent.ReportApiCall({"apiId":F,"errorCode":e.error.code,"success":!1}),s(e,J),i&&(i(e,v),V=l()),r.reject(e,v))):(W&&W(Q.successReentranceDelay),F&&$ReportEvent.ReportApiCall({"apiId":F,"success":!0}),n&&(n(e,v),V=l()),r.resolve(e,v));
var u=f.isApiTelemetryEnabled;if(H&&F&&u&&$Do.when("$Telemetry",function(){var e=c.$Telemetry,r=e.get("pltMetrics")||{},t=Math.round(_-G),a=Math.round(V-G),o=r.apiTimingInfo||[];o.push({"id":F,"durationOfApiCall":t,"totalProcessingTime":a,"responseCode":B}),r.apiTimingInfo=o,e.set("pltMetrics",r)}),Q.apiId&&Q.propertyId){var p=a?a.code:void 0;Qos&&Qos.log(Q.apiId,Q.propertyId,K,p,void 0,t)}}}var Q=this,J=a;u(a)?F=null:(J=a.url,F=a.apiId);var U,W,z=void 0!==L&&null!==L?L:b;p=p||x;var G,_,V,B,K;null===P&&(P=!1,f&&f.isINT&&f.isCorpnet&&(P=!0)),t=t||"key"+E++,Q.originId=null,Q.jsonpParameterName=void 0,Q.successReentranceDelay=0,Q.failureReentranceDelay=0,Q.apiId="",Q.propertyId="",Q.start=function(){var a=$PageHelper.deferred();
return c.requests.enqueue(function(t){W=t,K=(new Date).getTime();var n,i=J,s={"canary":f.apiCanary,"Accept":S};s[A]=2,s[R]="xhr",e(s,$,f.correlationId),e(s,k,f.eipt),e(s,I,f.apiUseIpt?"1":null),e(s,D,f.authz),r(s,m,f.uiflvr),r(s,T,f.scid),r(s,C,f.hpgid),$ClientTelemetry.setHeaders(s);var c=o;if(o&&!u(o)){void 0===o[m]&&void 0!==f.uiflvr&&(o[m]=f.uiflvr);var d=$ClientTelemetry.getUnauthSessionId();void 0===o[h]&&void 0!==d&&(o[h]=d),void 0===o[T]&&void 0!==f.scid&&(o[T]=f.scid),void 0===o[C]&&void 0!==f.hpgid&&(o[C]=f.hpgid),c=JSON.stringify(o)
}return c&&(c=c.replace(/\?/g,"\\u003F")),g&&g.appendLog&&g.appendLog("DataRequest("+i+")"),G=l(),U=$PageHelper.ajax({"url":i,"dataType":"json","jsonp":Q.jsonpParameterName,"jsonpCallback":n?"wLive.Core.DataRequest."+n:void 0,"data":c,"processData":!1,"type":c?"POST":"GET","headers":s,"timeout":p}).then(function(e){B=e.xhr.status,O(e.rsp,a)},function(e){B=e.xhr.status,O(N(e.xhr,e.textStatus,e.errorThrown),a)}),!0},Q.abort,t),a.promise()},Q.abort=function(){U&&(U.abort(),U=null),W&&(W(),W=null)}}function a(e){return e?"<span style='font-weight: bold;'>"+e.toString().encodeHtml()+":</span> ":""
}function o(e,r){return r?"<div>"+a(e)+r.toString().encodeHtml()+"</div>":""}function n(e){var r=[];if(e){for(var t=(e||"").split("\n"),a=0;a<t.length;a++){for(var o=t[a],n=(o||"").split("\\u000d"),i=0;i<n.length;i++){var s=(n[i]||"").replace("\\u000a","").replace("\\u0022",'"').replace("\\u0027","'").replace("\\u0028","(").replace("\\u0029",")").replace("\\u003a",":").replace("\\u003c","&lt;").replace("\\u003d","=").replace("\\u003e","&gt;").replace("\\u005c","\\");r.push(s)}}}return r}function i(e){var r="";
if(e){for(var t=0;t<e.length;t++){r+=e[t]+"\n"}}return r}function s(e,r){if(P&&e&&e.error&&(e.error.stackTrace||e.error.debugMessage)){var t=n(e.error.stackTrace),a=null;if(e.error.isFatal||e.error.showError||j){a=i(t),v&&v.showError(e.error.code,"ApiRequest Error: "+(e.error.message||""),r||"<none>",null,null,null,a,e.error.debugMessage,e.error.data,e.error.isFatal?"#FFC0C0":"#C0FFFF",!0)}else{if(window.$Debug&&g.scriptConsole){var s=g.scriptConsole;a=i(t),s.errorHtml(o("Url",r)+o("Error Code",e.error.code)+(e.error.message?o("Message",e.error.message):"")+(e.error.isFatal?o("Is Fatal",e.error.isFatal):"")+(e.error.debugMessage?o("Debug",e.error.debugMessage):""),{"url":r,"code":e.error.code,"data":e.error.data,"stackTrace":t,"rsp":e})
}}}}function u(e){return"string"==typeof e}function l(){return c.performance&&c.performance.now?c.performance.now():(new Date).getTime()}var c=window,d=c.wLive,p=d.Core,f=c.$Config,v=c.$WebWatson,g=c.$Debug||{},m="uiflvr",T="scid",h="uaid",C="hpgid",x=3e4,y=8001,w=8002,b=0,I="wlPreferIpt",k="eipt",D="authz",$="x-ms-correlation-id",A="x-ms-apiVersion",R="x-ms-apiTransport",q=100,S="application/json",E=0,F=null;p.DataRequest=t;var M=p.DataRequest.Errors=[];p.DataRequest.ApiErrorCodes=c.$DataRequest.ApiErrorCodes={"GeneralError":"6000","AuthFailure":"6001","InvalidArgs":"6002","Timeout":y,"Aborted":w};
var P=null,j=!1;t.forceShowErrors=function(e){j=e},c.$Do&&c.$Do.register("DataRequest",0,!0)});