/*!
 * 1DS JS SDK Core, 3.1.11
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
var e=this,n=function(c){"use strict";var D="function",a="object",n="undefined",f="prototype",_="hasOwnProperty",t=Object,j=t[f],U=t.assign,V=t.create,e=t.defineProperty,z=j[_],B=null;function K(e){return void 0===e&&(e=!0),B&&e||(typeof globalThis!==n&&globalThis&&(B=globalThis),typeof self!==n&&self&&(B=self),typeof window!==n&&window&&(B=window),typeof global!==n&&global&&(B=global)),B}function H(e){throw new TypeError(e)}function W(e){if(V)return V(e);if(null==e)return{};var n=typeof e;function t(){}return n!==a&&n!==D&&H("Object prototype may only be an Object:"+e),t[f]=e,new t}(K()||{}).Symbol,(K()||{}).Reflect;var q=U||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])j[_].call(n,i)&&(e[i]=n[i]);return e},G=function(e,n){return(G=t.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n[_](t)&&(e[t]=n[t])})(e,n)};function J(e,n){function t(){this.constructor=e}typeof n!==D&&null!==n&&H("Class extends value "+n+" is not a constructor or null"),G(e,n),e[f]=null===n?W(n):(t[f]=n[f],new t)}function X(e,n){for(var t=0,r=n.length,i=e.length;t<r;t++,i++)e[i]=n[t];return e}var Q={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5},$="constructor",v="prototype",Z="function",Y="_dynInstFuncs",ee="_isDynProxy",ne="_dynClass",te="_dynInstChk",re=te,ie="_dfOpts",oe="_unknown_",ae="__proto__",ue="useBaseInst",le="setInstFuncs",se=Object,ce=se.getPrototypeOf,fe=0;function p(e,n){return e&&se[v].hasOwnProperty.call(e,n)}function ge(e){return e&&(e===se[v]||e===Array[v])}function de(e){return ge(e)||e===Function[v]}function h(e){if(e){if(ce)return ce(e);e=e[ae]||e[v]||(e[$]?e[$][v]:null);if(e)return e}return null}function ve(e,n){var t=[],r=se.getOwnPropertyNames;if(r)t=r(e);else for(var i in e)"string"==typeof i&&p(e,i)&&t.push(i);if(t&&0<t.length)for(var o=0;o<t.length;o++)n(t[o])}function pe(e,n,t){return n!==$&&typeof e[n]===Z&&(t||p(e,n))}function he(e){throw new TypeError("DynamicProto: "+e)}function me(e,n){for(var t=e.length-1;0<=t;t--)if(e[t]===n)return 1}function ye(e,n){return p(e,v)?e.name||n||oe:((e||{})[$]||{}).name||n||oe}function S(e,r,n,t){p(e,v)||he("theClass is an invalid class definition.");var i,o,a,u,l,s,c=e[v],f=(function(e){if(ce)for(var n=[],t=h(r);t&&!de(t)&&!me(n,t);){if(t===e)return 1;n.push(t),t=h(t)}}(c)||he("["+ye(e)+"] is not in class hierarchy of ["+ye(r)+"]"),null),e=(p(c,ne)?f=c[ne]:(f="_dynCls$"+ye(e,"_")+"$"+fe,fe++,c[ne]=f),S[ie]),g=!!e[ue],d=(g&&t&&t[ue]!==undefined&&(g=!!t[ue]),o={},ve(i=r,function(e){!o[e]&&pe(i,e,!1)&&(o[e]=i[e])}),o),g=(n(r,function(e,n,t,o){function r(e,n,t){var r,i=n[t];return i[ee]&&o&&!1!==(r=e[Y]||{})[re]&&(i=(r[n[ne]]||{})[t]||i),function(){return i.apply(e,arguments)}}for(var i={},a=(ve(t,function(e){i[e]=r(n,t,e)}),h(e)),u=[];a&&!de(a)&&!me(u,a);)ve(a,function(e){!i[e]&&pe(a,e,!ce)&&(i[e]=r(n,a,e))}),u.push(a),a=h(a);return i}(c,r,d,g)),!!ce&&!!e[le]);a=c,n=f,u=r,l=d,e=!1!==(g=g&&t?!!t[le]:g),ge(a)||(c=u[Y]=u[Y]||{},s=c[n]=c[n]||{},!1!==c[re]&&(c[re]=!!e),ve(u,function(e){var t,r,i;pe(u,e,!1)&&u[e]!==l[e]&&(s[e]=u[e],delete u[e],p(a,e)&&(!a[e]||a[e][ee])||(a[e]=(t=a,r=e,(i=function(){var e,n;return(function(e,n,t,r){var i=null;if(e&&p(t,ne)){var o=e[Y]||{};if((i=(o[t[ne]]||{})[n])||he("Missing ["+n+"] "+Z),!i[te]&&!1!==o[re]){for(var a=!p(e,n),u=h(e),l=[];a&&u&&!de(u)&&!me(l,u);){var s=u[n];if(s){a=s===r;break}l.push(u),u=h(u)}try{a&&(e[n]=i),i[te]=1}catch(c){o[re]=!1}}}return i}(this,r,t,i)||(typeof(n=(n=t[e=r])===i?h(t)[e]:n)!==Z&&he("["+e+"] is not a "+Z),n)).apply(this,arguments)})[ee]=1,i)))}))}S[ie]={setInstFuncs:!0,useBaseInst:!0},c.LoggingSeverity=void 0,(r=c.LoggingSeverity||(c.LoggingSeverity={}))[r.CRITICAL=1]="CRITICAL",r[r.WARNING=2]="WARNING";var Ce={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105},Se="attachEvent",xe="addEventListener",Ie="detachEvent",be="removeEventListener",Te="toISOString",we="endsWith",Pe="startsWith",Ee="indexOf",Ae="trim",r="toString",Ne=e,Le=t.keys,e=String[f],Me=e[Ae],ke=e[we],Fe=e[Pe],Oe=Date[f][Te],e=Array.isArray,Re=j[r],De=(z[r].call(t),/-([a-z])/g),_e=/([^\w\d_$])/g,je=/^(\d+[\w\d_$])/;function Ue(e,n){return typeof e===n}function d(e){return e===undefined||typeof e===n}function m(e){return null===e||d(e)}function Ve(e){return!m(e)}function ze(e,n){return!(!e||!z.call(e,n))}function g(e){return!(!e||typeof e!==a)}function y(e){return!(!e||typeof e!==D)}function Be(e,n,t,r){void 0===r&&(r=!1);var i=!1;if(!m(e))try{m(e[xe])?m(e[Se])||(e[Se]("on"+n,t),i=!0):(e[xe](n,t,r),i=!0)}catch(o){}return i}function Ke(e,n,t,r){if(void 0===r&&(r=!1),!m(e))try{m(e[be])?m(e[Ie])||e[Ie]("on"+n,t):e[be](n,t,r)}catch(i){}}function He(e,n){if(e)for(var t in e)z.call(e,t)&&n.call(e,t,e[t])}function We(e,n){var t=!1;if(e&&n&&!(t=e===n)){if(ke)return e[we](n);var r=e,i=n,e=!1,n=i?i.length:0,o=r?r.length:0;if(n&&o&&n<=o&&!(e=r===i)){for(var a=o-1,u=n-1;0<=u;u--){if(r[a]!=i[u])return!1;a--}e=!0}return e}return t}function i(e,n){return!(!e||!n||!~e.indexOf(n))}function qe(e){return!(!e||"[object Date]"!==Re.call(e))}var C=e||function(e){return!(!e||"[object Array]"!==Re.call(e))};function Ge(e){return!(!e||"[object Error]"!==Re.call(e))}function x(e){return"string"==typeof e}function Je(e){return"number"==typeof e}function Xe(e){return"boolean"==typeof e}function o(e){if(e){if(Oe)return e[Te]();var n;return e&&e.getUTCFullYear?(n=function(e){e=""+e;return 1===e.length?"0"+e:e},e.getUTCFullYear()+"-"+n(1+e.getUTCMonth())+"-"+n(e.getUTCDate())+"T"+n(e.getUTCHours())+":"+n(e.getUTCMinutes())+":"+n(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"):void 0}}function I(e,n,t){var r=e.length;try{for(var i=0;i<r&&!(i in e&&-1===n.call(t||e,e[i],i,e));i++);}catch(o){}}function u(e,n,t){if(e){if(e[Ee])return e[Ee](n,t);var r=e.length,t=t||0;try{for(var i=Math.max(0<=t?t:r-Math.abs(t),0);i<r;i++)if(i in e&&e[i]===n)return i}catch(o){}}return-1}function Qe(e,n,t){if(e){if(e.map)return e.map(n,t);var r=e.length,i=t||e,o=Array(r);try{for(var a=0;a<r;a++)a in e&&(o[a]=n.call(i,e[a],e))}catch(u){}}return o}function $e(e,n,t){var r;if(e){if(e.reduce)return e.reduce(n,t);var i=e.length,o=0;if(3<=arguments.length)r=t;else{for(;o<i&&!(o in e);)o++;r=e[o++]}for(;o<i;)o in e&&(r=n(r,e[o],o,e)),o++}return r}function b(e){return e&&(Me&&e[Ae]?e[Ae]():e.replace?e.replace(/^\s+|\s+$/g,""):e)}var Ze=!{toString:null}.propertyIsEnumerable("toString"),Ye=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function en(e){var n=typeof e;if(n===D||n===a&&null!==e||H("objKeys called on non-object"),!Ze&&Le)return Le(e);var t,r=[];for(t in e)e&&z.call(e,t)&&r.push(t);if(Ze)for(var i=Ye.length,o=0;o<i;o++)e&&z.call(e,Ye[o])&&r.push(Ye[o]);return r}function l(e,n,t,r){if(Ne)try{var i={enumerable:!0,configurable:!0};return t&&(i.get=t),r&&(i.set=r),Ne(e,n,i),!0}catch(o){}return!1}function T(){var e=Date;return e.now?e.now():(new e).getTime()}function nn(e){return Ge(e)?e.name:""}function w(e,n,t,r,i){var o=t;return!e||(o=e[n])===t||i&&!i(o)||r&&!r(t)||(e[n]=o=t),o}function tn(e,n,t){var r;return e?!(r=e[n])&&m(r)&&(r=d(t)?{}:t,e[n]=r):r=d(t)?{}:t,r}function rn(e){return!e}function on(e){return!!e}function P(e){throw Error(e)}var an="window",un="navigator",ln="location",sn="performance",cn="JSON",fn="crypto",gn="msCrypto",dn="msie",vn="trident/",pn=null,hn=null,mn=!1,yn=null,Cn=null;function Sn(e,n){var t,r=!1;if(e){try{(r=n in e)||(t=e[f])&&(r=n in t)}catch(i){}if(!r)try{r=!d((new e)[n])}catch(i){}}return r}function s(e){var n=K();return n&&n[e]?n[e]:e===an&&xn()?window:null}function xn(){return!(typeof window!==a||!window)}function In(){return xn()?window:s(an)}function bn(){return!(typeof document!==a||!document)}function Tn(){return bn()?document:s("document")}function wn(){return!(typeof navigator!==a||!navigator)}function Pn(){return wn()?navigator:s(un)}function En(){return!(typeof history!==a||!history)}function An(e){if(e&&mn){e=s("__mockLocation");if(e)return e}return typeof location===a&&location?location:s(ln)}function Nn(){return typeof console!==n?console:s("console")}function Ln(){return s(sn)}function Mn(){return!!(typeof JSON===a&&JSON||null!==s(cn))}function kn(){return Mn()?JSON||s(cn):null}function Fn(){return s(fn)}function On(){return s(gn)}function Rn(){var e=Pn();return!(!e||!e.product)&&"ReactNative"===e.product}function Dn(){var e=Pn();return!e||e.userAgent===hn&&null!==pn||(e=((hn=e.userAgent)||"").toLowerCase(),pn=i(e,dn)||i(e,vn)),pn}function _n(e){var n=Object[f].toString.call(e),t="";return"[object Error]"===n?t="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":Mn()&&(t=kn().stringify(e)),n+t}function jn(){return Cn=null===Cn?wn()&&!!Pn().sendBeacon:Cn}function Un(){return yn=null===yn&&(yn="undefined"!=typeof XDomainRequest)&&Vn()?yn&&!Sn(s("XMLHttpRequest"),"withCredentials"):yn}function Vn(){var e=!1;try{e=!!s("XMLHttpRequest")}catch(n){}return e}var zn,Bn=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],Kn=null;function Hn(e){var n=Kn;return(n=n||!0===e.disableDbgExt?n:Kn||(e=s("Microsoft"),Kn=e?e.ApplicationInsights:Kn))?n.ChromeDbgExt:null}function Wn(e){return e?'"'+e.replace(/\"/g,"")+'"':""}function qn(e,n){var t,r=Nn();r&&(t="log",y(r[t=r[e]?e:t])&&r[t](n))}Jn.dataType="MessageData";var Gn=Jn;function Jn(e,n,t,r){void 0===t&&(t=!1),this.messageId=e,this.message=(t?"AI: ":"AI (Internal): ")+e;t="",Mn()&&(t=kn().stringify(r)),e=(n?" message:"+Wn(n):"")+(r?" props:"+Wn(t):"");this.message+=e}function Xn(e,n){return(e||{}).logger||new Qn(n)}var Qn=function ti(r){this.identifier="DiagnosticLogger",this.queue=[];var i=0,u={};S(ti,this,function(o){function e(e,n){e=r[e];return m(e)?n:e}function a(e,n){var t=Hn(r);t&&t.diagLog&&t.diagLog(e,n)}m(r)&&(r={}),o.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},o.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},o.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},o.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},o.throwInternal=function(e,n,t,r,i){n=new Gn(n,t,i=void 0!==i&&i,r);if(o.enableDebugExceptions())throw n;t=e===c.LoggingSeverity.CRITICAL?"errorToConsole":"warnToConsole";d(n.message)?a("throw"+(e===c.LoggingSeverity.CRITICAL?"Critical":"Warning"),n):(r=o.consoleLoggingLevel(),i?(i=+n.messageId,!u[i]&&e<=r&&(o[t](n.message),u[i]=!0)):e<=r&&o[t](n.message),o.logInternalMessage(e,n))},o.warnToConsole=function(e){qn("warn",e),a("warning",e)},o.errorToConsole=function(e){qn("error",e),a("error",e)},o.resetInternalMessageCount=function(){i=0,u={}},o.logInternalMessage=function(e,n){var t,r;i>=o.maxInternalMessageLimit()||(r=!0,t="AITR_"+n.messageId,u[t]?r=!1:u[t]=!0,r&&(e<=o.telemetryLoggingLevel()&&(o.queue.push(n),i++,a(e===c.LoggingSeverity.CRITICAL?"error":"warn",n)),i===o.maxInternalMessageLimit()&&(r=new Gn(Ce.MessageLimitPerPVExceeded,t="Internal events throttle limit per PageView reached for this app.",!1),o.queue.push(r),e===c.LoggingSeverity.CRITICAL?o.errorToConsole(t):o.warnToConsole(t))))}})},$n=(E.ParentContextKey="parent",E.ChildrenContextKey="childEvts",E);function E(e,i,n){var t,o=this,a=!1;o.start=T(),o.name=e,o.isAsync=n,o.isChildEvt=function(){return!1},y(i)&&(a=l(o,"payload",function(){return!t&&y(i)&&(t=i(),i=null),t})),o.getCtx=function(e){return e?(e===E.ParentContextKey||e===E.ChildrenContextKey?o:o.ctx||{})[e]:null},o.setCtx=function(e,n){e&&(e===E.ParentContextKey?(o[e]||(o.isChildEvt=function(){return!0}),o[e]=n):e===E.ChildrenContextKey?o[e]=n:(o.ctx=o.ctx||{})[e]=n)},o.complete=function(){var e=0,n=o.getCtx(E.ChildrenContextKey);if(C(n))for(var t=0;t<n.length;t++){var r=n[t];r&&(e+=r.time)}o.time=T()-o.start,o.exTime=o.time-e,o.complete=function(){},!a&&y(i)&&(o.payload=i())}}var Zn=function ri(n){this.ctx={},S(ri,this,function(t){t.create=function(e,n,t){return new $n(e,n,t)},t.fire=function(e){e&&(e.complete(),n&&y(n.perfEvent)&&n.perfEvent(e))},t.setCtx=function(e,n){e&&((t.ctx=t.ctx||{})[e]=n)},t.getCtx=function(e){return(t.ctx||{})[e]}})},Yn="CoreUtils.doPerf";function et(e,n,t,r,i){if(e)if(e=y(e.getPerfMgr)?e.getPerfMgr():e){var o,a=void 0,u=e.getCtx(Yn);try{if(a=e.create(n(),r,i))return u&&a.setCtx&&(a.setCtx($n.ParentContextKey,u),u.getCtx&&u.setCtx&&((o=u.getCtx($n.ChildrenContextKey))||(o=[],u.setCtx($n.ChildrenContextKey,o)),o.push(a))),e.setCtx(Yn,a),t(a)}catch(l){a&&a.setCtx&&a.setCtx("exception",l)}finally{a&&e.fire(a),e.setCtx(Yn,u)}}return t()}var nt=function(i,n){var o=this,a=null,u=y(i.processTelemetry),l=y(i.setNextPlugin);o._hasRun=!1,o.getPlugin=function(){return i},o.getNext=function(){return a},o.setNext=function(e){a=e},o.processTelemetry=function(t,r){r=r||n;var e=i?i.identifier:"TelemetryPluginChain";et(r?r.core():null,function(){return e+":processTelemetry"},function(){if(i&&u){o._hasRun=!0;try{r.setNext(a),l&&i.setNextPlugin(a),a&&(a._hasRun=!1),i.processTelemetry(t,r)}catch(n){var e=a&&a._hasRun;a&&e||r.diagLog().throwInternal(c.LoggingSeverity.CRITICAL,Ce.PluginException,"Plugin ["+i.identifier+"] failed during processTelemetry - "+_n(n)),a&&!e&&a.processTelemetry(t,r)}}else a&&(o._hasRun=!0,a.processTelemetry(t,r))},function(){return{item:t}},!t.sync)}};function tt(e,n){var t=[];if(e&&0<e.length)for(var r=null,i=0;i<e.length;i++){var o=e[i];o&&y(o.processTelemetry)&&(o=new nt(o,n),t.push(o),r&&r.setNext(o),r=o)}return 0<t.length?t[0]:null}var rt=function ii(e,i,t,n){var r,o,a,u,l=this,s=null;null!==n&&(e&&y(e.getPlugin)?s=function(e,n,t){var r=[],i=!t;if(e)for(;e;){var o=e.getPlugin();!i&&o!==t||(i=!0,r.push(o)),e=e.getNext()}return i||r.push(t),tt(r,n)}(e,l,n||e.getPlugin()):n?(r=l,a=e,u=!1,(o=n)&&e&&(a=[],I(e,function(e){!u&&e!==o||(u=!0,a.push(e))})),o&&!u&&(a=a||[]).push(o),s=tt(a,r)):d(n)&&(s=tt(e,l))),l.core=function(){return t},l.diagLog=function(){return Xn(t,i)},l.getCfg=function(){return i},l.getExtCfg=function(e,n){var t,r;return void 0===n&&(n={}),(t=i&&(r=i.extensionConfig)&&e?r[e]:t)||n},l.getConfig=function(e,n,t){void 0===t&&(t=!1);var r,e=l.getExtCfg(e,null);return e&&!m(e[n])?r=e[n]:i&&!m(i[n])&&(r=i[n]),m(r)?t:r},l.hasNext=function(){return null!=s},l.getNext=function(){return s},l.setNext=function(e){s=e},l.processNext=function(e){var n=s;n&&(s=n.getNext(),n.processTelemetry(e,l))},l.createNew=function(e,n){return new ii((e=void 0===e?null:e)||s,i,t,n)}},it="extensionConfig",ot="getPlugin",r=(at.prototype.initialize=function(e,n,t,r){this._baseTelInit(e,n,t,r)},at);function at(){var o=this,a=!1,u=null,l=null;o.core=null,o.diagLog=function(e){return o._getTelCtx(e).diagLog()},o.isInitialized=function(){return a},o.setInitialized=function(e){a=e},o.setNextPlugin=function(e){l=e},o.processNext=function(e,n){n?n.processNext(e):l&&y(l.processTelemetry)&&l.processTelemetry(e,null)},o._getTelCtx=function(e){var n,e=e=void 0===e?null:e;return e||(n=u||new rt(null,{},o.core),e=l&&l[ot]?n.createNew(null,l[ot]):n.createNew(null,l)),e},o._baseTelInit=function(e,n,t,r){e&&w(e,it,[],null,m),!r&&n&&(r=n.getProcessTelContext().getNext());var i=l;l&&l[ot]&&(i=l[ot]()),o.core=n,u=new rt(r,e,n,i),a=!0}}var ut="processTelemetry",lt="priority",st="setNextPlugin",ct="isInitialized";function ft(n,t){for(var e=[],r=null,i=n.getNext();i;){var o=i.getPlugin();o&&(r&&y(r[st])&&y(o[ut])&&r[st](o),y(o[ct])&&o[ct]()||e.push(o),r=o,i=i.getNext())}I(e,function(e){e.initialize(n.getCfg(),n.core(),t,n.getNext())})}function gt(e){return e.sort(function(e,n){var t=0,r=y(n[ut]);return y(e[ut])?t=r?e[lt]-n[lt]:1:r&&(t=-1),t})}J(pt,dt=r),pt._staticInit=(l(e=pt.prototype,"ChannelControls",e.getChannelControls),void l(e,"channelQueue",e.getChannelControls));var dt,vt=pt;function pt(){var l,r=dt.call(this)||this;function s(e){e&&0<e.length&&(I(e=e.sort(function(e,n){return e.priority-n.priority}),function(e){e.priority<500&&P("Channel has invalid priority"+e.identifier)}),l.push(e))}return r.identifier="ChannelControllerPlugin",r.priority=500,S(pt,r,function(a,u){a.setNextPlugin=function(e){},a.processTelemetry=function(n,t){l&&I(l,function(e){0<e.length&&r._getTelCtx(t).createNew(e).processNext(n)})},a.getChannelControls=function(){return l},a.initialize=function(n,t,r){var e,i,o;a.isInitialized()||(u.initialize(n,t,r),e=(n||{}).channels,i=r,l=[],e&&I(e,s),i&&(o=[],I(i,function(e){500<e.priority&&o.push(e)}),s(o)),I(l,function(e){return ft(new rt(e,n,t),r)}))}}),r}var ht="toGMTString",mt="toUTCString",yt="cookie",Ct="expires",St="enabled",xt="isCookieUseDisabled",It="disableCookiesUsage",bt="_ckMgr",A="",Tt=null,wt=null,Pt=null,Et=Tn(),At={},Nt={};function Lt(e){return!e||e.isEnabled()}function Mt(e,n){var t,r;return e?t=e.getCookieMgr():n&&(t=n.cookieCfg[bt]||kt(n)),t||(e=(e||{}).logger,(r=kt[bt]||Nt[bt])||(r=kt[bt]=kt(n,e),Nt[bt]=r),t=r),t}function kt(e,i){w(t=(e=e||Nt).cookieCfg=e.cookieCfg||{},"domain",e.cookieDomain,Ve,m),w(t,"path",e.cookiePath||"/",null,m),m(t[St])&&(n=void 0,d(e[xt])||(n=!e[xt]),d(e[It])||(n=!e[It]),t[St]=n);var n,t,s=t,c=s.path||"/",f=s.domain,r=!1!==s[St],g={isEnabled:function(){var e=r&&N(i),n=Nt[bt];return e&&n&&g!==n?Lt(n):e},setEnabled:function(e){r=!1!==e},set:function(e,n,t,r,i){var o,a,u,l=!1;return Lt(g)&&(o={},-1!=(u=(a=b(n||A)).indexOf(";"))&&(a=b(n.substring(0,u)),o=Ft(n.substring(1+u))),w(o,"domain",r||f,on,d),m(t)||(u=Dn(),d(o[Ct])&&0<(n=T()+1e3*t)&&((r=new Date).setTime(n),w(o,Ct,Ot(r,u?ht:mt)||Ot(r,u?ht:mt)||A,on)),u||w(o,"max-age",A+t,null,d)),(n=An())&&"https:"===n.protocol&&(w(o,"secure",null,null,d),(wt=null===wt?!_t((Pn()||{}).userAgent):wt)&&w(o,"SameSite","None",null,d)),w(o,"path",i||c,null,d),(s.setCookie||Dt)(e,Rt(a,o)),l=!0),l},get:function(e){var n=A;return Lt(g)?(s.getCookie||function(e){var n,t=A;return Et&&(n=Et[yt]||A,Pt!==n&&(At=Ft(n),Pt=n),t=b(At[e]||A)),t})(e):n},del:function(e,n){return!!Lt(g)&&g.purge(e,n)},purge:function(e,n){var t,r=!1;return N(i)&&((t={}).path=n||"/",t[Ct]="Thu, 01 Jan 1970 00:00:01 GMT",n=t,Dn()||(n["max-age"]="0"),(s.delCookie||Dt)(e,Rt(A,n)),r=!0),r}};return g[bt]=g}function N(e){if(null===Tt){Tt=!1;try{Tt=(Et||{})[yt]!==undefined}catch(n){e&&e.throwInternal(c.LoggingSeverity.WARNING,Ce.CannotAccessCookie,"Cannot access document.cookie - "+nn(n),{exception:_n(n)})}}return Tt}function Ft(e){var t={};return e&&e.length&&I(b(e).split(";"),function(e){var n;(e=b(e||A))&&(-1==(n=e.indexOf("="))?t[e]=null:t[b(e.substring(0,n))]=b(e.substring(1+n)))}),t}function Ot(e,n){return y(e[n])?e[n]():null}function Rt(e,n){var t=e||A;return He(n,function(e,n){t+="; "+e+(m(n)?A:"="+n)}),t}function Dt(e,n){Et&&(Et[yt]=e+"="+n)}function _t(e){return!(!x(e)||!i(e,"CPU iPhone OS 12")&&!i(e,"iPad; CPU OS 12")&&!(i(e,"Macintosh; Intel Mac OS X 10_14")&&i(e,"Version/")&&i(e,"Safari"))&&(!i(e,"Macintosh; Intel Mac OS X 10_14")||!We(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!i(e,"Chrome/5")&&!i(e,"Chrome/6")&&(!i(e,"UnrealEngine")||i(e,"Chrome"))&&!i(e,"UCBrowser/12")&&!i(e,"UCBrowser/11"))}var jt="_notificationManager";function Ut(e,n){return new Zn(n)}var Vt,e=function oi(){var n,u,l,t,r,s=!1;S(oi,this,function(a){a._extensions=[],u=new vt,a.logger=new Qn({loggingLevelConsole:c.LoggingSeverity.CRITICAL}),n=[],a.isInitialized=function(){return s},a.initialize=function(e,n,r,t){a.isInitialized()&&P("Core should not be initialized more than once"),e&&!m(e.instrumentationKey)||P("Please provide instrumentation key"),l=t,a[jt]=t,a.config=e||{},t&&!0!==a.config.disableDbgExt&&t.addNotificationListener(function(e){if(!zn){zn={};for(var n=0;n<Bn.length;n++)zn[Bn[n]]=function(n,t){return function(){var e=Hn(t);e&&(e=e.listener)&&e[n]&&e[n].apply(e,arguments)}}(Bn[n],e)}return zn}(e)),a.config.enablePerfMgr&&w(a.config,"createPerfMgr",Ut),e.extensions=m(e.extensions)?[]:e.extensions,tn(e,it).NotificationManager=t,r&&(a.logger=r);var t=[],i=(t.push.apply(t,X(X([],n),e.extensions)),t=gt(t),[]),o={};I(t,function(e){(m(e)||m(e.initialize))&&P("Extensions must provide callback to initialize");var n=e.priority,t=e.identifier;e&&n&&(m(o[n])?o[n]=t:r.warnToConsole("Two extensions have same priority #"+n+" - "+o[n]+", "+t)),(!n||n<u.priority)&&i.push(e)}),t.push(u),i.push(u),t=gt(t),a._extensions=t,ft(new rt([u],e,a),t),ft(new rt(i,e,a),t),a._extensions=i,0===a.getTransmissionControls().length&&P("No channels available"),s=!0,a.releaseQueue()},a.getTransmissionControls=function(){return u.getChannelControls()},a.track=function(e){w(e,"iKey",a.config.instrumentationKey,null,rn),w(e,"time",o(new Date),null,rn),w(e,"ver","4.0",null,m),a.isInitialized()?a.getProcessTelContext().processNext(e):n.push(e)},a.getProcessTelContext=function(){var e=a._extensions,n=e;return e&&0!==e.length||(n=[u]),new rt(n,a.config,a)},a.getNotifyMgr=function(){return l||(l=W({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,n){},eventsSendRequest:function(e,n){}}),a[jt]=l),l},a.getCookieMgr=function(){return r=r||kt(a.config,a.logger)},a.setCookieMgr=function(e){r=e},a.getPerfMgr=function(){return t||a.config&&a.config.enablePerfMgr&&y(a.config.createPerfMgr)&&(t=a.config.createPerfMgr(a,a.getNotifyMgr())),t||null},a.setPerfMgr=function(e){t=e},a.eventCnt=function(){return n.length},a.releaseQueue=function(){0<n.length&&(I(n,function(e){a.getProcessTelContext().processNext(e)}),n=[])}})},zt=function ai(e){this.listeners=[];var n=!!(e||{}).perfEvtsSendAll;S(ai,this,function(i){i.addNotificationListener=function(e){i.listeners.push(e)},i.removeNotificationListener=function(e){for(var n=u(i.listeners,e);-1<n;)i.listeners.splice(n,1),n=u(i.listeners,e)},i.eventsSent=function(n){I(i.listeners,function(e){e&&e.eventsSent&&setTimeout(function(){return e.eventsSent(n)},0)})},i.eventsDiscarded=function(n,t){I(i.listeners,function(e){e&&e.eventsDiscarded&&setTimeout(function(){return e.eventsDiscarded(n,t)},0)})},i.eventsSendRequest=function(t,r){I(i.listeners,function(e){if(e&&e.eventsSendRequest)if(r)setTimeout(function(){return e.eventsSendRequest(t,r)},0);else try{e.eventsSendRequest(t,r)}catch(n){}})},i.perfEvent=function(t){!t||!n&&t.isChildEvt()||I(i.listeners,function(e){if(e&&e.perfEvent)if(t.isAsync)setTimeout(function(){return e.perfEvent(t)},0);else try{e.perfEvent(t)}catch(n){}})}})},Bt=(J(Kt,Vt=e),Kt);function Kt(){var e=Vt.call(this)||this,r=0;return S(Kt,e,function(t,i){function n(e){var n=t.getNotifyMgr();n&&n.eventsDiscarded([e],Q.InvalidEvent)}t.initialize=function(e,n,t,r){i.initialize(e,n,t||new Qn(e),r||new zt(e))},t.track=function(e){et(t.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){if(null===e&&(n(e),P("Invalid telemetry item")),m(e.name))throw n(e),Error("telemetry name required");i.track(e)},function(){return{item:e}},!e.sync)},t.addNotificationListener=function(e){var n=t.getNotifyMgr();n&&n.addNotificationListener(e)},t.removeNotificationListener=function(e){var n=t.getNotifyMgr();n&&n.removeNotificationListener(e)},t.pollInternalLogs=function(n){var e=t.config.diagnosticLogInterval;return e&&0<e||(e=1e4),r&&t.stopPollingInternalLogs(),r=setInterval(function(){var e=t.logger?t.logger.queue:[];I(e,function(e){e={name:n||"InternalMessageId: "+e.messageId,iKey:t.config.instrumentationKey,time:o(new Date),baseType:Gn.dataType,baseData:{message:e.message}};t.track(e)}),e.length=0},e)},t.stopPollingInternalLogs=function(){r&&(clearInterval(r),r=0)}}),e}var Ht=4294967296,L=4294967295,Wt=!1,qt=123456789,Gt=987654321;function Jt(e){e<0&&(e>>>=0),qt=123456789+e&L,Gt=987654321-e&L,Wt=!0}function Xt(){try{var e=2147483647&T();Jt((Math.random()*Ht^e)+e)}catch(n){}}function Qt(e){return 0<e?Math.floor($t()/L*(e+1))>>>0:0}function $t(e){var n=Fn()||On(),n=n&&n.getRandomValues?n.getRandomValues(new Uint32Array(1))[0]&L:Dn()?(Wt||Xt(),Zt()&L):Math.floor(Ht*Math.random()|0);return e||(n>>>=0),n}function Zt(e){var n=((Gt=36969*(65535&Gt)+(Gt>>16)&L)<<16)+(65535&(qt=18e3*(65535&qt)+(qt>>16)&L))>>>0&L|0;return e||(n>>>=0),n}var Yt="visibilitychange",er="pagehide",nr="pageshow";function M(e,n){var t=!1,r=In(),r=(r&&(t=Be(r,e,n),t=Be(r.body,e,n)||t),Tn());return r&&Be(r,e,n)||t}function tr(e,n,t){var r,i=!1;return n&&e&&C(e)&&(r=[],I(e,function(e){x(e)&&(t&&-1!==u(t,e)?r.push(e):i=M(e,n)||i)}),!i&&0<r.length&&(i=tr(r,n))),i}function rr(e,n){return tr(["beforeunload","unload","pagehide"],e,n)}function ir(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(lr,function(e){var n=0|Qt(15);return("x"===e?n:3&n|8).toString(16)})}function or(){var e=Ln();return e&&e.now?e.now():T()}function ar(e){void 0===e&&(e=22);for(var n=$t()>>>0,t=0,r="";r.length<e;)r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[0|63&n]||"",n>>>=6,5==++t&&(n=($t()<<2&4294967295|3&n)>>>0,t=0);return r}function ur(){for(var e,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],t="",r=0;r<4;r++)t+=n[15&(e=$t())]+n[e>>4&15]+n[e>>8&15]+n[e>>12&15]+n[e>>16&15]+n[e>>20&15]+n[e>>24&15]+n[e>>28&15];var i=n[8+(3&$t())|0];return t.substr(0,8)+t.substr(9,4)+"4"+t.substr(13,3)+i+t.substr(16,3)+t.substr(19,12)}var lr=/[xy]/g,sr={Attach:Be,AttachEvent:Be,Detach:Ke,DetachEvent:Ke},cr={NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32},fr={Normal:1,CostDeferred:2,RealTime:3,Immediate:4},k={Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9},gr=q(q({},Ce),{AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}),q="3.1.11",dr="1DS-Web-JS-"+q,vr="withCredentials",pr=((F={})[0]=k.Unspecified,F[2]=k.Double,F[1]=k.String,F[3]=k.Bool,F[4098]=k.Double,F[4097]=k.String,F[4099]=k.Bool,F),hr=null,mr=!!Tn(),F=!!In();function yr(e){return!(""===e||m(e))}function Cr(e){if(e){var n=e.indexOf("-");if(-1<n)return e.substring(0,n)}return""}function Sr(){return hr=null===hr?!d(Uint8Array)&&!function(){var e=Pn();if(!d(e)&&e.userAgent)return!~(e=e.userAgent.toLowerCase()).indexOf("safari")&&!~e.indexOf("firefox")||~e.indexOf("chrome")?void 0:1}()&&!Rn():hr}function xr(e){return!!(e&&Je(e)&&fr.Normal<=e&&e<=fr.Immediate)}function Ir(e,n,t){if(!n&&!yr(n)||"string"!=typeof e)return null;e=typeof n;if("string"==e||"number"==e||"boolean"==e||C(n))n={value:n};else if("object"!=e||n.hasOwnProperty("value")){if(m(n.value)||""===n.value||!x(n.value)&&!Je(n.value)&&!Xe(n.value)&&!C(n.value))return null}else n={value:t?JSON.stringify(n):n};if(C(n.value)&&!Fr(n.value))return null;if(!m(n.kind)){if(C(n.value)||!kr(n.kind))return null;n.value=n.value.toString()}return n}function br(e,n,t){var r=-1;return d(e)||(0<n&&(32===n?r=8192:n<=13&&(r=n<<5)),0<=t&&t<=9?(-1===r&&(r=0),r|=t):(n=pr[O(e)]||-1,-1!==r&&-1!==n?r|=n:n===k.Double&&(r=n))),r}function Tr(){Mt(null).setEnabled(!1)}function wr(e,n,t){N(null)&&Mt(null).set(e,n,86400*t,null,"/")}function Pr(e){N(null)&&Mt(null).del(e)}function Er(e){return N(null)?Ar(Mt(null),e):""}function Ar(e,n,t){var r;return void 0===t&&(t=!0),e&&(r=e.get(n),t&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||""}function Nr(e){void 0===e&&(e="D");var n=ir();return"B"===e?n="{"+n+"}":"P"===e?n="("+n+")":"N"===e&&(n=n.replace(/-/g,"")),n}function Lr(e,n,t,r,i){var o={},a=!1,u=0,l=arguments.length,s=Object[f],c=arguments;for("[object Boolean]"===s.toString.call(c[0])&&(a=c[0],u++);u<l;u++)He(c[u],function(t,e){a&&e&&g(e)?C(e)?(o[t]=o[t]||[],I(e,function(e,n){e&&g(e)?o[t][n]=Lr(!0,o[t][n],e):o[t][n]=e})):o[t]=Lr(!0,o[t],e):o[t]=e});return o}var Mr=or;function kr(e){return e===cr.NotSet||e>cr.NotSet&&e<=cr.Pii_IPV4AddressLegacy||e===cr.CustomerContent_GenericContent}function Fr(e){return 0<e.length}function Or(e,n){e.timings=e.timings||{},e.timings.processTelemetryStart=e.timings.processTelemetryStart||{},e.timings.processTelemetryStart[n]=Mr()}function O(e){var n,t=0;return null!==e&&e!==undefined&&("string"==(n=typeof e)?t=1:"number"==n?t=2:"boolean"==n?t=3:n===a&&(t=4,C(e)?(t=4096,0<e.length&&(t|=O(e[0]))):ze(e,"value")&&(t=8192|O(e.value)))),t}var Rr,Dr={Version:q,FullVersionString:dr,strUndefined:n,strObject:a,Undefined:n,arrForEach:I,arrIndexOf:u,arrMap:Qe,arrReduce:$e,objKeys:en,toISOString:o,isReactNative:Rn,isString:x,isNumber:Je,isBoolean:Xe,isFunction:y,isArray:C,isObject:g,strTrim:b,isDocumentObjectAvailable:mr,isWindowObjectAvailable:F,isValueAssigned:yr,getTenantId:Cr,isBeaconsSupported:jn,isUint8ArrayAvailable:Sr,isLatency:xr,sanitizeProperty:Ir,getISOString:o,useXDomainRequest:Un,getCommonSchemaMetaData:br,cookieAvailable:N,disallowsSameSiteNone:_t,setCookie:wr,deleteCookie:Pr,getCookie:Er,createGuid:Nr,extend:Lr,getTime:Mr,isValueKind:kr,isArrayValid:Fr,objDefineAccessors:l,addPageUnloadEventListener:rr,setProcessTelemetryTimings:Or,addEventHandler:M,getFieldValueType:O,strEndsWith:We,objForEachKey:He},_r={_canUseCookies:undefined,isTypeof:Ue,isUndefined:d,isNullOrUndefined:m,hasOwnProperty:ze,isFunction:y,isObject:g,isDate:qe,isArray:C,isError:Ge,isString:x,isNumber:Je,isBoolean:Xe,toISOString:o,arrForEach:I,arrIndexOf:u,arrMap:Qe,arrReduce:$e,strTrim:b,objCreate:W,objKeys:en,objDefineAccessors:l,addEventHandler:M,dateNow:T,isIE:Dn,disableCookies:Tr,newGuid:ir,perfNow:or,newId:ar,randomValue:Qt,random32:$t,mwcRandomSeed:function(e){e?Jt(e):Xt()},mwcRandom32:Zt,generateW3CId:ur},jr="version",Ur="properties";function Vr(){var e=Rr.call(this)||this;return e.pluginVersionStringArr=[],e.pluginVersionString="",S(Vr,e,function(u,l){u.logger&&u.logger.queue||(u.logger=new Qn({loggingLevelConsole:c.LoggingSeverity.CRITICAL})),u.initialize=function(r,i,o,a){et(u,function(){return"AppInsightsCore.initialize"},function(){if(r){r.endpointUrl||(r.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var e=r.propertyStorageOverride;if(e&&(!e.getProperty||!e.setProperty))throw Error("Invalid property storage override passed.");r.channels&&I(r.channels,function(e){e&&I(e,function(e){e.identifier&&e.version&&(e=e.identifier+"="+e.version,u.pluginVersionStringArr.push(e))})})}u.getWParam=function(){return"undefined"!=typeof document?0:-1},i&&I(i,function(e){e&&e.identifier&&e.version&&(e=e.identifier+"="+e.version,u.pluginVersionStringArr.push(e))}),u.pluginVersionString=u.pluginVersionStringArr.join(";");try{l.initialize(r,i,o,a),u.pollInternalLogs("InternalLog")}catch(t){var e=u.logger,n=_n(t);~n.indexOf("channels")&&(n+="\n - Channels must be provided through config.channels only!"),e.throwInternal(c.LoggingSeverity.CRITICAL,gr.FailedToInitializeSDK,"SDK Initialization Failed - no telemetry will be sent: "+n)}},function(){return{config:r,extensions:i,logger:o,notificationManager:a}})},u.track=function(t){et(u,function(){return"AppInsightsCore.track"},function(){var e,n=t;n&&(n.timings=n.timings||{},n.timings.trackStart=Mr(),xr(n.latency)||(n.latency=fr.Normal),(e=n.ext=n.ext||{}).sdk=e.sdk||{},e.sdk.ver=dr,(e=n.baseData=n.baseData||{})[Ur]||(e[Ur]={}),(e=e[Ur])[jr]||(e[jr]=""),""!==u.pluginVersionString&&(e[jr]=u.pluginVersionString)),l.track(n)},function(){return{item:t}},!t.sync)}}),e}J(Vr,Rr=Bt);var zr,Br=Vr;function Kr(){var e=zr.call(this)||this;return S(Kr,e,function(o,a){o.initialize=function(e,n,t,r){e&&!e.endpointUrl&&(e.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),o.getWParam=function(){return mr?0:-1};try{a.initialize(e,n,t,r)}catch(i){o.logger.throwInternal(c.LoggingSeverity.CRITICAL,gr.FailedToInitializeSDK,"Initialization Failed: "+_n(i)+"\n - Note: Channels must be provided through config.channels only")}},o.track=function(e){var n;e&&((n=e.ext=e.ext||{}).sdk=n.sdk||{},n.sdk.ver=dr),a.track(e)}}),e}J(Kr,zr=e);var Hr=Kr,Wr=y;function R(e){var a=0,u=null,n=[];function i(t,r,i,o){n.push(function(){var e;try{(e=1===a?Wr(t)?t(u):u:Wr(r)?r(u):u)instanceof R?e.then(i,o):(2!==a||Wr(r)?i:o)(e)}catch(n){return void o(n)}}),0!==a&&l()}function l(){var r;0<n.length&&(r=n.slice(),n=[],setTimeout(function(){for(var e=0,n=r.length;e<n;++e)try{r[e]()}catch(t){}},0))}function t(e){0===a&&(u=e,a=2,l())}if(S(R,this,function(n){n.then=function(t,r){return new R(function(e,n){i(t,r,e,n)})},n["catch"]=function(e){return n.then(null,e)}}),!Wr(e))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{e(function(e){0===a&&(u=e,a=1,l())},t)}catch(r){t(r)}}R.resolve=function(r){return r instanceof R?r:r&&Wr(r.then)?new R(function(e,n){try{r.then(e,n)}catch(t){n(t)}}):new R(function(e){e(r)})},R.reject=function(t){return new R(function(e,n){n(t)})},R.all=function(u){if(u&&u.length)return new R(function(r,e){try{for(var i=[],o=0,n=0;n<u.length;n++){var t=u[n];t&&Wr(t.then)?(o++,t.then(function(n,t){return function(e){n[t]=e,0==--o&&r(i)}}(i,n),e)):i[n]=t}0===o&&setTimeout(function(){r(i)},0)}catch(a){e(a)}})},R.race=function(i){return new R(function(n,t){if(i&&i.length)try{for(var r=0;r<i.length;r++)!function(){var e=i[r];e&&Wr(e.then)?e.then(n,t):setTimeout(function(){n(e)},0)}()}catch(e){t(e)}})};var qr=R,Gr=0,Jr=[],Xr=[],Qr=[];function $r(){return(new Date).getTime()}function Zr(e,n){var h=0,m=(e||"<unnamed>")+"."+Gr;function y(e){var n=K();n&&n.QUnit&&console&&console.log("ESPromiseScheduler["+m+"] "+e)}function C(e){n&&n.warnToConsole("ESPromiseScheduler["+m+"] "+e)}Gr++,S(Zr,this,function(e){var d=null,v=0;function p(e,n){for(var t=0;t<e.length;t++)if(e[t].id===n)return e.splice(t,1)[0];return null}e.scheduleEvent=function(t,e,u){var i,o,n,a=m+"."+v,e=(v++,e&&(a+="-("+e+")"),a+"{"+h+"}"),r=(h++,{evt:null,tm:$r(),id:e,isRunning:!1,isAborted:!1});return r.evt=d?(i=r,o=d,n=new qr(function(n,t){var e=$r()-o.tm,r=o.id;y("["+a+"] is waiting for ["+r+":"+e+" ms] to complete before starting -- ["+Xr.length+"] waiting and ["+Jr.length+"] running"),i.abort=function(e){i.abort=null,p(Xr,a),i.isAborted=!0,t(Error(e))},o.evt.then(function(e){p(Xr,a),g(i).then(n,t)},function(e){p(Xr,a),g(i).then(n,t)})}),Xr.push(i),n):g(r),(d=r).evt._schId=e,r.evt;function l(e){for(var n=$r(),t=n-6e5,r=e.length,i=0;i<r;){var o,a=e[i];a&&a.tm<t?(o=null,a.abort?(o="Aborting ["+a.id+"] due to Excessive runtime ("+(n-a.tm)+" ms)",a.abort(o)):o="Removing ["+a.id+"] due to Excessive runtime ("+(n-a.tm)+" ms)",C(o),e.splice(i,1),r--):i++}}function s(e,n){var t,r=!1,i=p(Jr,e);i||(i=p(Qr,e),r=!0),i?(i.to&&(clearTimeout(i.to),i.to=null),t=$r()-i.tm,n?r?C("Timed out event ["+e+"] finally complete -- "+t+" ms"):y("Promise ["+e+"] Complete -- "+t+" ms"):(Qr.push(i),C("Event ["+e+"] Timed out and removed -- "+t+" ms"))):y("Failed to remove ["+e+"] from running queue"),d&&d.id===e&&(d=null),l(Jr),l(Xr),l(Qr)}function c(n,t){return function(e){return s(n,!0),t&&t(e),e}}function f(r,o){var a=r.id;return new qr(function(n,t){y("Event ["+a+"] Starting -- waited for "+(r.wTm||"--")+" ms"),r.isRunning=!0,r.abort=function(e){r.abort=null,r.isAborted=!0,s(a,!1),t(Error(e))};var e=o(a);e instanceof qr?(u&&(r.to=setTimeout(function(){s(a,!1),t(Error("Timed out after ["+u+"] ms"))},u)),function i(n,e,t,r){e.then(function(e){return e instanceof qr?(y("Event ["+n+"] returned a promise -- waiting"),i(n,e,t,r),e):c(n,t)(e)},c(n,r))}(a,e,function(e){y("Event ["+a+"] Resolving after "+($r()-r.tm)+" ms"),n(e)},t)):(y("Promise ["+a+"] Auto completed as the start action did not return a promise"),n())})}function g(e){var n=$r();return e.wTm=n-e.tm,e.tm=n,e.isAborted?qr.reject(Error("["+a+"] was aborted")):(Jr.push(e),f(e,t))}}})}Zr.incomplete=function(){return Jr},Zr.waitingToStart=function(){return Xr};var Yr=Zr,ei=(ni.getFieldType=O,ni);function ni(e){var l=this,o={},a=[],u=[];function s(e,n){var t=o[e];if(!(i=t?t[n]:i)&&null!==i){if(x(e)&&x(n))if(0<u.length){for(var r=0;r<u.length;r++)if(u[r].handleField(e,n)){i={canHandle:!0,fieldHandler:u[r]};break}}else 0===a.length&&(i={canHandle:!0});if(!i&&null!==i)for(var i=null,r=0;r<a.length;r++)if(a[r].handleField(e,n)){i={canHandle:!0,handler:a[r],fieldHandler:null};break}(t=t||(o[e]={}))[n]=i}return i}function c(e,n,t,r,i,o){if(e.handler)return e.handler.property(n,t,i,o);if(!m(i.kind)){if(4096==(4096&r)||!kr(i.kind))return null;i.value=i.value.toString()}return function u(r,i,o,e,n){var t,a;return n&&r&&(t=r.getSanitizer(i,o,e,n.kind,n.propertyType))&&(4===e?(a={},He(n.value,function(e,n){var t;yr(n)&&(t=f(0,0,n),(t=u(r,i+"."+o,e,O(n),t))&&(a[e]=t.value))}),n.value=a):n=t.call(l,{path:i,name:o,type:e,prop:n,sanitizer:l})),n}(e.fieldHandler,n,t,r,i)}function f(e,n,t){return yr(t)?{value:t}:null}e&&u.push(e),l.addSanitizer=function(e){e&&(a.push(e),o={})},l.addFieldSanitizer=function(e){e&&(u.push(e),o={})},l.handleField=function(e,n){e=s(e,n);return!!e&&e.canHandle},l.value=function(e,n,t,r){var i=s(e,n);if(i&&i.canHandle){if(!i||!i.canHandle)return null;if(i.handler)return i.handler.value(e,n,t,r);if(!x(n)||m(t)||""===t)return null;var o=null,a=O(t);if(8192==(8192&a)){var u=-8193&a;if(!yr((o=t).value)||1!=u&&2!=u&&3!=u&&4096!=(4096&u))return null}else 1===a||2===a||3===a||4096==(4096&a)?o=f(0,0,t):4===a&&(o=f(0,0,r?JSON.stringify(t):t));if(o)return c(i,e,n,a,o,r)}return null},l.property=function(e,n,t,r){var i=s(e,n);if(!i||!i.canHandle)return null;if(!x(n)||m(t)||!yr(t.value))return null;var o=O(t.value);return 0===o?null:c(i,e,n,o,t,r)}}c.AppInsightsCore=Br,c.BaseCore=Hr,c.BaseTelemetryPlugin=r,c.CoreUtils=_r,c.DiagnosticLogger=Qn,c.ESPromise=qr,c.ESPromiseScheduler=Yr,c.EventHelper=sr,c.EventLatency=fr,c.EventPersistence={Normal:1,Critical:2},c.EventPropertyType=k,c.EventsDiscardedReason=Q,c.FullVersionString=dr,c.InternalAppInsightsCore=Bt,c.InternalBaseCore=e,c.MinChannelPriorty=100,c.NotificationManager=zt,c.PerfEvent=$n,c.PerfManager=Zn,c.ProcessTelemetryContext=rt,c.TraceLevel={NONE:0,ERROR:1,WARNING:2,INFORMATION:3},c.Undefined=n,c.Utils=Dr,c.ValueKind=cr,c.ValueSanitizer=ei,c.Version=q,c._ExtendedInternalMessageId=gr,c._InternalLogMessage=Gn,c._InternalMessageId=Ce,c.addEventHandler=M,c.addEventListeners=tr,c.addPageHideEventListener=function ui(t,e){var n=!1;return e&&-1!==u(e,er)||(n=M(er,t)),!(n=(!e||-1===u(e,Yt))&&M(Yt,function(e){var n=Tn();t&&n&&"hidden"===n.visibilityState&&t(e)})||n)&&e?ui(t):n},c.addPageShowEventListener=function li(t,e){var n=!1;return e&&-1!==u(e,nr)||(n=M(nr,t)),!(n=(!e||-1===u(e,Yt))&&M(Yt,function(e){var n=Tn();t&&n&&"visible"===n.visibilityState&&t(e)})||n)&&e?li(t):n},c.addPageUnloadEventListener=rr,c.areCookiesSupported=N,c.arrForEach=I,c.arrIndexOf=u,c.arrMap=Qe,c.arrReduce=$e,c.attachEvent=Be,c.cookieAvailable=N,c.createCookieMgr=kt,c.createGuid=Nr,c.dateNow=T,c.deleteCookie=Pr,c.detachEvent=Ke,c.disableCookies=Tr,c.disallowsSameSiteNone=_t,c.doPerf=et,c.dumpObj=_n,c.extend=Lr,c.generateW3CId=ur,c.getCommonSchemaMetaData=br,c.getConsole=Nn,c.getCookie=Er,c.getCookieValue=Ar,c.getCrypto=Fn,c.getDocument=Tn,c.getExceptionName=nn,c.getFieldValueType=O,c.getGlobal=K,c.getGlobalInst=s,c.getHistory=function(){return En()?history:s("history")},c.getIEVersion=function(e){var n=((e=(e=void 0===e?null:e)?e:(n=Pn()||{})?(n.userAgent||"").toLowerCase():"")||"").toLowerCase();if(i(n,dn))return e=Tn()||{},Math.max(parseInt(n.split(dn)[1]),e.documentMode||0);if(i(n,vn)){e=parseInt(n.split(vn)[1]);if(e)return e+4}return null},c.getISOString=o,c.getJSON=kn,c.getLocation=An,c.getMsCrypto=On,c.getNavigator=Pn,c.getPerformance=Ln,c.getSetValue=tn,c.getTenantId=Cr,c.getTime=Mr,c.getWindow=In,c.hasDocument=bn,c.hasHistory=En,c.hasJSON=Mn,c.hasNavigator=wn,c.hasOwnProperty=ze,c.hasWindow=xn,c.isArray=C,c.isArrayValid=Fr,c.isBeaconsSupported=jn,c.isBoolean=Xe,c.isChromium=function(){return!!s("chrome")},c.isDate=qe,c.isDocumentObjectAvailable=mr,c.isError=Ge,c.isFetchSupported=function(e){var n=!1;try{var n=!!s("fetch"),t=s("Request");n&&e&&t&&(n=Sn(t,"keepalive"))}catch(r){}return n},c.isFunction=y,c.isIE=Dn,c.isLatency=xr,c.isNotTruthy=rn,c.isNullOrUndefined=m,c.isNumber=Je,c.isObject=g,c.isReactNative=Rn,c.isString=x,c.isTruthy=on,c.isTypeof=Ue,c.isUint8ArrayAvailable=Sr,c.isUndefined=d,c.isValueAssigned=yr,c.isValueKind=kr,c.isWindowObjectAvailable=F,c.isXhrSupported=Vn,c.newGuid=ir,c.newId=ar,c.normalizeJsName=function(e){var n=e;return e&&x(e)?(n=(n=e.replace(De,function(e,n){return n.toUpperCase()})).replace(_e,"_")).replace(je,function(e,n){return"_"+n}):n},c.objCreate=W,c.objDefineAccessors=l,c.objForEachKey=He,c.objKeys=en,c.openXhr=function(e,n,t,r,i,o){function a(e,n,t){try{e[n]=t}catch(r){}}void 0===r&&(r=!1),void 0===i&&(i=!1);var u=new XMLHttpRequest;return r&&a(u,"Microsoft_ApplicationInsights_BypassAjaxInstrumentation",r),t&&a(u,vr,t),u.open(e,n,!i),t&&a(u,vr,t),!i&&o&&a(u,"timeout",o),u},c.optimizeObject=function(e){return e&&U?t(U({},e)):e},c.perfNow=or,c.proxyAssign=function(r,i,o){if(r&&i&&r!==i&&g(r)&&g(i))for(var e in i)!function(n){var e,t;x(n)&&(y(e=i[n])?o&&!o(n,!0,i,r)||(r[n]=(t=n,function(){return i[t].apply(i,arguments)})):o&&!o(n,!1,i,r)||(ze(r,n)&&delete r[n],l(r,n,function(){return i[n]},function(e){i[n]=e})||(r[n]=e)))}(e);return r},c.random32=$t,c.randomValue=Qt,c.safeGetCookieMgr=Mt,c.safeGetLogger=Xn,c.sanitizeProperty=Ir,c.setCookie=wr,c.setEnableEnvMocks=function(e){mn=e},c.setProcessTelemetryTimings=Or,c.setValue=w,c.strContains=i,c.strEndsWith=We,c.strExtensionConfig=it,c.strFunction=D,c.strIKey="iKey",c.strObject=a,c.strPrototype=f,c.strStartsWith=function(e,n){var t=!1;if(e&&n&&!(t=e===n)){if(Fe)return e[Pe](n);var r=e,i=n,e=!1,o=i?i.length:0;if(r&&o&&r.length>=o&&!(e=r===i)){for(var a=0;a<o;a++)if(r[a]!==i[a])return!1;e=!0}return e}return t},c.strTrim=b,c.strUndefined=n,c.throwError=P,c.toISOString=o,c.useXDomainRequest=Un;Br=c,Hr="__esModule",r={value:!0},_r=Object.defineProperty;if(_r)try{return void _r(Br,Hr,r)}catch(si){}typeof r.value!==undefined&&(Br[Hr]=r.value)};"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).oneDS=e.oneDS||{});
//# sourceMappingURL=ms.core-3.1.11.min.js.map

/*!
 * 1DS JS SDK POST plugin, 3.1.11
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
var e=this,n=function(e){"use strict";var c="function",V="object",W="undefined",a="prototype",d="hasOwnProperty",t=Object,g=t[a],C=t.assign,n=(t.create,t.defineProperty),u=g[d],r=null;function b(e){return void 0===e&&(e=!0),r&&e||(typeof globalThis!==W&&globalThis&&(r=globalThis),typeof self!==W&&self&&(r=self),typeof window!==W&&window&&(r=window),typeof global!==W&&global&&(r=global)),r}function S(e){throw new TypeError(e)}(b()||{}).Symbol,(b()||{}).Reflect;var o=C||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])g[d].call(n,o)&&(e[o]=n[o]);return e},x=function(e,n){return(x=t.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n[d](t)&&(e[t]=n[t])})(e,n)},w="constructor",v="prototype",R="function",E="_dynInstFuncs",I="_isDynProxy",h="_dynClass",P="_dynInstChk",p=P,_="_dfOpts",L="_unknown_",A="__proto__",M="useBaseInst",k="setInstFuncs",F=Object,y=F.getPrototypeOf,O=0;function m(e,n){return e&&F[v].hasOwnProperty.call(e,n)}function B(e){return e&&(e===F[v]||e===Array[v])}function N(e){return B(e)||e===Function[v]}function T(e){if(e){if(y)return y(e);e=e[A]||e[v]||(e[w]?e[w][v]:null);if(e)return e}return null}function K(e,n){var t=[],r=F.getOwnPropertyNames;if(r)t=r(e);else for(var o in e)"string"==typeof o&&m(e,o)&&t.push(o);if(t&&0<t.length)for(var i=0;i<t.length;i++)n(t[i])}function H(e,n,t){return n!==w&&typeof e[n]===R&&(t||m(e,n))}function D(e){throw new TypeError("DynamicProto: "+e)}function q(e,n){for(var t=e.length-1;0<=t;t--)if(e[t]===n)return 1}function z(e,n){return m(e,v)?e.name||n||L:((e||{})[w]||{}).name||n||L}function X(e,r,n,t){m(e,v)||D("theClass is an invalid class definition.");var o,i,a,u,s,l,c=e[v],f=(function(e){if(y)for(var n=[],t=T(r);t&&!N(t)&&!q(n,t);){if(t===e)return 1;n.push(t),t=T(t)}}(c)||D("["+z(e)+"] is not in class hierarchy of ["+z(r)+"]"),null),e=(m(c,h)?f=c[h]:(f="_dynCls$"+z(e,"_")+"$"+O,O++,c[h]=f),X[_]),d=!!e[M],g=(d&&t&&t[M]!==undefined&&(d=!!t[M]),i={},K(o=r,function(e){!i[e]&&H(o,e,!1)&&(i[e]=o[e])}),i),d=(n(r,function(e,n,t,i){function r(e,n,t){var r,o=n[t];return o[I]&&i&&!1!==(r=e[E]||{})[p]&&(o=(r[n[h]]||{})[t]||o),function(){return o.apply(e,arguments)}}for(var o={},a=(K(t,function(e){o[e]=r(n,t,e)}),T(e)),u=[];a&&!N(a)&&!q(u,a);)K(a,function(e){!o[e]&&H(a,e,!y)&&(o[e]=r(n,a,e))}),u.push(a),a=T(a);return o}(c,r,g,d)),!!y&&!!e[k]);a=c,n=f,u=r,s=g,e=!1!==(d=d&&t?!!t[k]:d),B(a)||(c=u[E]=u[E]||{},l=c[n]=c[n]||{},!1!==c[p]&&(c[p]=!!e),K(u,function(e){var t,r,o;H(u,e,!1)&&u[e]!==s[e]&&(l[e]=u[e],delete u[e],m(a,e)&&(!a[e]||a[e][I])||(a[e]=(t=a,r=e,(o=function(){var e,n;return(function(e,n,t,r){var o=null;if(e&&m(t,h)){var i=e[E]||{};if((o=(i[t[h]]||{})[n])||D("Missing ["+n+"] "+R),!o[P]&&!1!==i[p]){for(var a=!m(e,n),u=T(e),s=[];a&&u&&!N(u)&&!q(s,u);){var l=u[n];if(l){a=l===r;break}s.push(u),u=T(u)}try{a&&(e[n]=o),o[P]=1}catch(c){i[p]=!1}}}return o}(this,r,t,o)||(typeof(n=(n=t[e=r])===o?T(t)[e]:n)!==R&&D("["+e+"] is not a "+R),n)).apply(this,arguments)})[I]=1,o)))}))}X[_]={setInstFuncs:!0,useBaseInst:!0};var Q={CRITICAL:1,1:"CRITICAL",WARNING:2,2:"WARNING"},j={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105},U="attachEvent",ce="addEventListener",fe="startsWith",de="indexOf",ge="trim",i="toString",ve=n,he=t.keys,n=String[a],pe=n[ge],ye=n[fe],n=Array.isArray,me=g[i];function J(e){return e===undefined||typeof e===W}function G(e){return null===e||J(e)}function Te(e,n){return e&&u.call(e,n)}function Ce(e){return e&&typeof e===V}function f(e){return!(!e||typeof e!==c)}function be(e,n,t,r){void 0===r&&(r=!1);var o=!1;if(!G(e))try{G(e[ce])?G(e[U])||(e[U]("on"+n,t),o=!0):(e[ce](n,t,r),o=!0)}catch(i){}return o}function $(e,n){if(e)for(var t in e)u.call(e,t)&&n.call(e,t,e[t])}function Se(e,n){var t=!1;if(e&&n&&!(t=e===n)){if(ye)return e[fe](n);var r=e,o=n,e=!1,i=o?o.length:0;if(r&&i&&r.length>=i&&!(e=r===o)){for(var a=0;a<i;a++)if(r[a]!==o[a])return!1;e=!0}return e}return t}u[i].call(t);var Z=n||function(e){return!(!e||"[object Array]"!==me.call(e))};function xe(e){return"string"==typeof e}function we(e){return"number"==typeof e}function Y(e,n,t){var r=e.length;try{for(var o=0;o<r&&!(o in e&&-1===n.call(t||e,e[o],o,e));o++);}catch(i){}}function ee(e,n,t){if(e){if(e[de])return e[de](n,t);var r=e.length,t=t||0;try{for(var o=Math.max(0<=t?t:r-Math.abs(t),0);o<r;o++)if(o in e&&e[o]===n)return o}catch(i){}}return-1}function ne(e){return e&&(pe&&e[ge]?e[ge]():e.replace?e.replace(/^\s+|\s+$/g,""):e)}var Re=!{toString:null}.propertyIsEnumerable("toString"),Ee=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Ie(e){var n=typeof e;if(n===c||n===V&&null!==e||S("objKeys called on non-object"),!Re&&he)return he(e);var t,r=[];for(t in e)e&&u.call(e,t)&&r.push(t);if(Re)for(var o=Ee.length,i=0;i<o;i++)e&&u.call(e,Ee[i])&&r.push(Ee[i]);return r}function te(){var e=Date;return e.now?e.now():(new e).getTime()}function re(e){return e&&C?t(C({},e)):e}var Pe="window",_e="document",Le="navigator",Ae="location",Me="JSON",ke="ReactNative",oe=null,Fe=null;function Oe(e,n){var t,r=!1;if(e){try{(r=n in e)||(t=e[a])&&(r=n in t)}catch(o){}if(!r)try{r=!J((new e)[n])}catch(o){}}return r}function ie(e){var n=b();return n&&n[e]?n[e]:e===Pe&&Be()?window:null}function Be(){return typeof window===V&&window}function Ne(){return Be()?window:ie(Pe)}function Ke(){return typeof document===V&&document?document:ie(_e)}function He(){return!(typeof navigator!==V||!navigator)}function De(){return He()?navigator:ie(Le)}function qe(){return typeof JSON===V&&JSON||null!==ie(Me)}function ze(){return qe()?JSON||ie(Me):null}function je(){var e=De();return e&&e.product&&e.product===ke}function Ue(e){var n=Object[a].toString.call(e),t="";return"[object Error]"===n?t="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":qe()&&(t=ze().stringify(e)),n+t}function Ve(){return Fe=null===Fe?He()&&!!De().sendBeacon:Fe}function We(){var e=!1;try{e=!!ie("XMLHttpRequest")}catch(n){}return e}var Xe=null;function Qe(e){return e?'"'+e.replace(/\"/g,"")+'"':""}function Je(e,n){var t,r=typeof console!==W?console:ie("console");r&&(t="log",f(r[t=r[e]?e:t])&&r[t](n))}$e.dataType="MessageData";var Ge=$e;function $e(e,n,t,r){void 0===t&&(t=!1),this.messageId=e,this.message=(t?"AI: ":"AI (Internal): ")+e;t="",qe()&&(t=ze().stringify(r)),e=(n?" message:"+Qe(n):"")+(r?" props:"+Qe(t):"");this.message+=e}var Ze=function ot(o){this.identifier="DiagnosticLogger",this.queue=[];var u=0,s={};X(ot,this,function(i){function e(e,n){e=o[e];return G(e)?n:e}function a(e,n){var t,r=(t=(t=Xe)||!0===o.disableDbgExt?t:Xe||(r=ie("Microsoft"),Xe=r?r.ApplicationInsights:Xe))?t.ChromeDbgExt:null;r&&r.diagLog&&r.diagLog(e,n)}G(o)&&(o={}),i.consoleLoggingLevel=function(){return e("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return e("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return e("maxMessageLimit",25)},i.enableDebugExceptions=function(){return e("enableDebugExceptions",!1)},i.throwInternal=function(e,n,t,r,o){n=new Ge(n,t,o=void 0!==o&&o,r);if(i.enableDebugExceptions())throw n;t=e===Q.CRITICAL?"errorToConsole":"warnToConsole";J(n.message)?a("throw"+(e===Q.CRITICAL?"Critical":"Warning"),n):(r=i.consoleLoggingLevel(),o?(o=+n.messageId,!s[o]&&e<=r&&(i[t](n.message),s[o]=!0)):e<=r&&i[t](n.message),i.logInternalMessage(e,n))},i.warnToConsole=function(e){Je("warn",e),a("warning",e)},i.errorToConsole=function(e){Je("error",e),a("error",e)},i.resetInternalMessageCount=function(){u=0,s={}},i.logInternalMessage=function(e,n){var t,r;u>=i.maxInternalMessageLimit()||(r=!0,t="AITR_"+n.messageId,s[t]?r=!1:s[t]=!0,r&&(e<=i.telemetryLoggingLevel()&&(i.queue.push(n),u++,a(e===Q.CRITICAL?"error":"warn",n)),u===i.maxInternalMessageLimit()&&(r=new Ge(j.MessageLimitPerPVExceeded,t="Internal events throttle limit per PageView reached for this app.",!1),i.queue.push(r),e===Q.CRITICAL?i.errorToConsole(t):i.warnToConsole(t))))}})},Ye=(s.ParentContextKey="parent",s.ChildrenContextKey="childEvts",s);function s(e,o,n){var r,i=this,a=!1;i.start=te(),i.name=e,i.isAsync=n,i.isChildEvt=function(){return!1},f(o)&&(a=function(e){if(ve)try{var n={enumerable:!0,configurable:!0,get:function(){return!r&&f(o)&&(r=o(),o=null),r}};return ve(e,"payload",n),!0}catch(t){}return!1}(i)),i.getCtx=function(e){return e?(e===s.ParentContextKey||e===s.ChildrenContextKey?i:i.ctx||{})[e]:null},i.setCtx=function(e,n){e&&(e===s.ParentContextKey?(i[e]||(i.isChildEvt=function(){return!0}),i[e]=n):e===s.ChildrenContextKey?i[e]=n:(i.ctx=i.ctx||{})[e]=n)},i.complete=function(){var e=0,n=i.getCtx(s.ChildrenContextKey);if(Z(n))for(var t=0;t<n.length;t++){var r=n[t];r&&(e+=r.time)}i.time=te()-i.start,i.exTime=i.time-e,i.complete=function(){},!a&&f(o)&&(i.payload=o())}}var en="CoreUtils.doPerf";function ae(e,n,t,r,o){if(e)if(e=f(e.getPerfMgr)?e.getPerfMgr():e){var i,a=void 0,u=e.getCtx(en);try{if(a=e.create(n(),r,o))return u&&a.setCtx&&(a.setCtx(Ye.ParentContextKey,u),u.getCtx&&u.setCtx&&((i=u.getCtx(Ye.ChildrenContextKey))||(i=[],u.setCtx(Ye.ChildrenContextKey,i)),i.push(a))),e.setCtx(en,a),t(a)}catch(s){a&&a.setCtx&&a.setCtx("exception",s)}finally{a&&e.fire(a),e.setCtx(en,u)}}return t()}var nn=function(o,n){var i=this,a=null,u=f(o.processTelemetry),s=f(o.setNextPlugin);i._hasRun=!1,i.getPlugin=function(){return o},i.getNext=function(){return a},i.setNext=function(e){a=e},i.processTelemetry=function(t,r){r=r||n;var e=o?o.identifier:"TelemetryPluginChain";ae(r?r.core():null,function(){return e+":processTelemetry"},function(){if(o&&u){i._hasRun=!0;try{r.setNext(a),s&&o.setNextPlugin(a),a&&(a._hasRun=!1),o.processTelemetry(t,r)}catch(n){var e=a&&a._hasRun;a&&e||r.diagLog().throwInternal(Q.CRITICAL,j.PluginException,"Plugin ["+o.identifier+"] failed during processTelemetry - "+Ue(n)),a&&!e&&a.processTelemetry(t,r)}}else a&&(i._hasRun=!0,a.processTelemetry(t,r))},function(){return{item:t}},!t.sync)}};function tn(e,n){var t=[];if(e&&0<e.length)for(var r=null,o=0;o<e.length;o++){var i=e[o];i&&f(i.processTelemetry)&&(i=new nn(i,n),t.push(i),r&&r.setNext(i),r=i)}return 0<t.length?t[0]:null}var rn=function it(e,o,t,n){var r,i,a,u,s=this,l=null;null!==n&&(e&&f(e.getPlugin)?l=function(e,n,t){var r=[],o=!t;if(e)for(;e;){var i=e.getPlugin();!o&&i!==t||(o=!0,r.push(i)),e=e.getNext()}return o||r.push(t),tn(r,n)}(e,s,n||e.getPlugin()):n?(r=s,a=e,u=!1,(i=n)&&e&&(a=[],Y(e,function(e){!u&&e!==i||(u=!0,a.push(e))})),i&&!u&&(a=a||[]).push(i),l=tn(a,r)):J(n)&&(l=tn(e,s))),s.core=function(){return t},s.diagLog=function(){return(t||{}).logger||new Ze(o)},s.getCfg=function(){return o},s.getExtCfg=function(e,n){var t,r;return void 0===n&&(n={}),(t=o&&(r=o.extensionConfig)&&e?r[e]:t)||n},s.getConfig=function(e,n,t){void 0===t&&(t=!1);var r,e=s.getExtCfg(e,null);return e&&!G(e[n])?r=e[n]:o&&!G(o[n])&&(r=o[n]),G(r)?t:r},s.hasNext=function(){return null!=l},s.getNext=function(){return l},s.setNext=function(e){l=e},s.processNext=function(e){var n=l;n&&(l=n.getNext(),n.processTelemetry(e,s))},s.createNew=function(e,n){return new it((e=void 0===e?null:e)||l,o,t,n)}},on="getPlugin",i=(an.prototype.initialize=function(e,n,t,r){this._baseTelInit(e,n,t,r)},an);function an(){var u=this,s=!1,l=null,c=null;u.core=null,u.diagLog=function(e){return u._getTelCtx(e).diagLog()},u.isInitialized=function(){return s},u.setInitialized=function(e){s=e},u.setNextPlugin=function(e){c=e},u.processNext=function(e,n){n?n.processNext(e):c&&f(c.processTelemetry)&&c.processTelemetry(e,null)},u._getTelCtx=function(e){var n,e=e=void 0===e?null:e;return e||(n=l||new rn(null,{},u.core),e=c&&c[on]?n.createNew(null,c[on]):n.createNew(null,c)),e},u._baseTelInit=function(e,n,t,r){e&&(a="extensionConfig",i=o=[],e&&(i=e[a])!==o&&G(i)&&(e[a]=i=o)),!r&&n&&(r=n.getProcessTelContext().getNext());var o,i,a=c;c&&c[on]&&(a=c[on]()),u.core=n,l=new rn(r,e,n,a),s=!0}}var un="visibilitychange",sn="pagehide",ln="pageshow";function cn(e,n){var t=!1,r=Ne(),r=(r&&(t=be(r,e,n),t=be(r.body,e,n)||t),Ke());return r&&be(r,e,n)||t}function fn(e,n){!function i(e,n,t){var r,o=!1;return n&&e&&Z(e)&&(r=[],Y(e,function(e){xe(e)&&(t&&-1!==ee(t,e)?r.push(e):o=cn(e,n)||o)}),!o&&0<r.length&&(o=i(r,n))),o}(["beforeunload","unload","pagehide"],e,n)}var dn=o(o({},j),{AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}),gn="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",vn="withCredentials",hn="timeout",pn=((n={})[0]=0,n[2]=6,n[1]=1,n[3]=7,n[4098]=6,n[4097]=1,n[4099]=7,n),o=(Ke(),!!Ne());function ue(e){return""!==e&&!G(e)}function yn(e,n,t){var r=-1;return J(e)||(0<n&&(32===n?r=8192:n<=13&&(r=n<<5)),0<=t&&t<=9?(-1===r&&(r=0),r|=t):(n=pn[function o(e){var n,t=0;return null!==e&&e!==undefined&&("string"==(n=typeof e)?t=1:"number"==n?t=2:"boolean"==n?t=3:n===V&&(t=4,Z(e)?(t=4096,0<e.length&&(t|=o(e[0]))):Te(e,"value")&&(t=8192|o(e.value)))),t}(e)]||-1,-1!==r&&-1!==n?r|=n:6===n&&(r=n))),r}function mn(){var r={},n=!1,e=0,t=arguments.length,o=Object[a],i=arguments;for("[object Boolean]"===o.toString.call(i[0])&&(n=i[0],e++);e<t;e++)$(i[e],function(t,e){n&&e&&Ce(e)?Z(e)?(r[t]=r[t]||[],Y(e,function(e,n){e&&Ce(e)?r[t][n]=mn(!0,r[t][n],e):r[t][n]=e})):r[t]=mn(!0,r[t],e):r[t]=e});return r}var se=function(){var e=ie("performance");return e&&e.now?e.now():te()};function Tn(e,n){e.timings=e.timings||{},e.timings.processTelemetryStart=e.timings.processTelemetryStart||{},e.timings.processTelemetryStart[n]=se()}var Cn="REAL_TIME",bn="POST",Sn="drop",n="requeue",xn="application/x-json-stream",wn="cache-control",Rn="content-type",En="kill-duration",In="time-delta-millis",Pn="AuthMsaDeviceTicket",_n="msfpc";function Ln(e){e=(e.ext||{}).intweb;return e&&ue(e[_n])?e[_n]:null}function An(e){for(var n=null,t=0;null===n&&t<e.length;t++)n=Ln(e[t]);return n}kn.create=function(e,n){return new kn(e,n)};var Mn=kn;function kn(r,e){var o=e?[].concat(e):[],e=this,i=An(o);e.iKey=function(){return r},e.Msfpc=function(){return i||""},e.count=function(){return o.length},e.events=function(){return o},e.addEvent=function(e){return!!e&&(o.push(e),i=i||Ln(e),!0)},e.split=function(e,n){var t;return e<o.length&&(t=o.length-e,G(n)||(t=n<t?n:t),t=o.splice(e,t),i=An(o)),new kn(r,t)}}var Fn="metadata",On=/\./,Bn=function at(n,e,T,t){var i="baseData",C=!!t,b=e,S={};X(at,this,function(y){function m(e,f,d,g,v,h,p){$(e,function(e,n){if(n||ue(n)){var t,r=d,o=e,i=v,a=f;if(C&&!g&&On.test(e)){var u=e.split("."),s=u.length;if(1<s){for(var i=i&&i.slice(),l=0;l<s-1;l++){var c=u[l],a=a[c]=a[c]||{};r+="."+c,i&&i.push(c)}o=u[s-1]}}(e=g&&((t=S[e=r])===undefined&&(7<=e.length&&(t=Se(e,"ext.metadata")||Se(e,"ext.web")),S[e]=t),t)||!b||!b.handleField(r,o)?function(e,n){if(!e&&!ue(e)||"string"!=typeof o)return null;var t=typeof e;if("string"==t||"number"==t||"boolean"==t||Z(e))e={value:e};else if("object"!=t||e.hasOwnProperty("value")){if(G(e.value)||""===e.value||!xe(e.value)&&!we(e.value)&&"boolean"!=typeof e.value&&!Z(e.value))return null}else e={value:n?JSON.stringify(e):e};if(Z(e.value)&&!(0<e.value.length))return null;if(!G(e.kind)){if(Z(e.value)||!(0===(t=e.kind)||0<t&&t<=13||32===t))return null;e.value=e.value.toString()}return e}(n,T):b.value(r,o,n,T))&&(t=e.value,a[o]=t,h&&h(i,o,e),p&&"object"==typeof t&&!Z(t)&&((e=i)&&(e=i.slice()).push(o),m(n,t,r+"."+o,g,e,h,p)))}})}y.createPayload=function(e,n,t,r,o,i){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:e,isTeardown:n,isSync:t,isBeacon:r,sendType:i,sendReason:o}},y.appendPayload=function(v,h,p){var e=v&&h&&!v.overflow;return e&&ae(n,function(){return"Serializer:appendPayload"},function(){for(var e=h.events(),n=v.payloadBlob,t=v.numEvents,r=!1,o=[],i=[],a=v.isBeacon,u=a?65e3:3984588,s=a?65e3:2e6,l=0,c=0;l<e.length;){var f=e[l];if(f){if(p<=t){v.overflow=h.split(l);break}var d=y.getEventBlob(f);if(d&&d.length<=s){var g=d.length;if(u<n.length+g){v.overflow=h.split(l);break}n&&(n+="\n"),n+=d,20<++c&&(n.substr(0,1),c=0),r=!0,t++}else(d?o:i).push(f),e.splice(l,1),l--}l++}o&&0<o.length&&v.sizeExceed.push(Mn.create(h.iKey(),o)),i&&0<i.length&&v.failedEvts.push(Mn.create(h.iKey(),i)),r&&(v.batches.push(h),v.payloadBlob=n,v.numEvents=t,a=h.iKey(),-1===ee(v.apiKeys,a)&&v.apiKeys.push(a))},function(){return{payload:v,theBatch:{iKey:h.iKey(),evts:h.events()},max:p}}),e},y.getEventBlob=function(o){try{return ae(n,function(){return"Serializer.getEventBlob"},function(){var e={},r=(e.name=o.name,e.time=o.time,e.ver=o.ver,e.iKey="o:"+function(e){if(e){var n=e.indexOf("-");if(-1<n)return e.substring(0,n)}return""}(o.iKey),{}),n=o.ext,n=(n&&(e.ext=r,$(n,function(e,n){m(n,r[e]={},"ext."+e,!0,null,null,!0)})),e.data={}),t=(n.baseType=o.baseType,n[i]={});return m(o.baseData,t,i,!1,[i],function(e,n,t){Nn(r,e,n,t)},!0),m(o.data,n,"data",!1,[],function(e,n,t){Nn(r,e,n,t)},!0),JSON.stringify(e)},function(){return{item:o}})}catch(e){return null}}})};function Nn(e,n,t,r){if(r&&e){var o=yn(r.value,r.kind,r.propertyType);if(-1<o){var i=e[Fn],a=(a=(i=i||(e[Fn]={f:{}})).f)||(i.f={});if(n)for(var u=0;u<n.length;u++)var s=n[u],a=(a[s]||(a[s]={f:{}}),a[s].f||(a[s].f={}));a=a[t]={},Z(r.value)?a.a={t:o}:a.t=o}}}function Kn(){}Kn.shouldRetryForStatus=function(e){return!(300<=e&&e<500&&408!=e&&429!=e||501==e||505==e)},Kn.getMillisToBackoffForRetry=function(e){return Math.min(Math.pow(2,e)*(2400+Math.floor(1200*Math.random())),6e5)};var Hn=Kn,Dn=function ut(){var s={};X(ut,this,function(e){e.setKillSwitchTenants=function(e,n){if(e&&n)try{i=e.split(","),a=[],i&&Y(i,function(e){a.push(ne(e))});var t=a;if("this-request-only"===n)return t;for(var r=1e3*parseInt(n,10),o=0;o<t.length;++o)s[t[o]]=te()+r}catch(u){return[]}var i,a;return[]},e.isTenantKilled=function(e){var n=s,e=ne(e);return n[e]!==undefined&&n[e]>te()||(delete n[e],!1)}})},qn=function st(){var n=!0,t=!0,r=!0,o="use-collector-delta",i=!1;X(st,this,function(e){e.allowRequestSending=function(){return n},e.firstRequestSent=function(){r&&(r=!1,i||(n=!1))},e.shouldAddClockSkewHeaders=function(){return t},e.getClockSkewHeaderValue=function(){return o},e.setClockSkew=function(e){i||(e?(o=e,i=t=!0):t=!1,n=!0)}})},zn="sendAttempt",jn="&NoResponseBody=true",Un=((l={})[1]=n,l[100]=n,l[200]="sent",l[8004]=Sn,l[8003]=Sn,l),Vn={};function Wn(e){try{return e.responseText}catch(n){}return""}function Xn(e,n){var t=!1;if(e&&n){var r=Ie(e);if(r&&0<r.length)for(var o=n.toLowerCase(),i=0;i<r.length;i++){var a=r[i];if(a&&Te(n,a)&&a.toLowerCase()==o){t=!0;break}}}return t}function Qn(e,n,t,r){n&&t&&0<t.length&&(r&&Vn[n]?(e.hdrs[Vn[n]]=t,e.useHdrs=!0):e.url+="&"+n+"="+t)}Vn.AuthMsaDeviceTicket="AuthMsaDeviceTicket";var Jn,Gn,$n=function lt(w,e,R,c){this._responseHandlers=[];var E,I,P,f,_,L,A="?cors=true&content-type="+xn,M=new Dn,k=!1,F=new qn,O=!1,B=0,N=!0,K=[],H={},D=[],q=null,z=!1,j=!1,U=!1;X(lt,this,function(p){var g=!0;function a(e,n){for(var t=0,r=null,o=0;null==r&&o<e.length;)1===(t=e[o])?(oe=null===oe&&(oe="undefined"!=typeof XDomainRequest)&&We()?oe&&!Oe(ie("XMLHttpRequest"),"withCredentials"):oe)?r=i:We()&&(r=s):2===t&&function(e){var n=!1;try{var n=!!ie("fetch"),t=ie("Request");n&&e&&t&&(n=Oe(t,"keepalive"))}catch(r){}return n}(n)?r=u:O&&3===t&&Ve()&&(r=l),o++;return r?{_transport:t,_isSync:n,sendPOST:r}:null}function i(e,n,t){var r=new XDomainRequest;r.open(bn,e.urlString),e.timeout&&(r.timeout=e.timeout),r.onload=function(){var e=Wn(r);y(n,200,{},e),S(e)},r.onerror=function(){y(n,400,{})},r.ontimeout=function(){y(n,500,{})},r.onprogress=function(){},t?r.send(e.data):E._setTimeoutOverride(function(){r.send(e.data)},0)}function u(e,r,n){var t,o=e.urlString,i=!1,a=!1;(t={body:e.data,method:bn}).Microsoft_ApplicationInsights_BypassAjaxInstrumentation=!0;n&&(t.keepalive=!0,2===e._sendReason&&(i=!0,o+=jn)),g&&(t.credentials="include"),e.headers&&0<Ie(e.headers).length&&(t.headers=e.headers),fetch(o,t).then(function(e){var t={},n="";e.headers&&e.headers.forEach(function(e,n){t[n]=e}),e.body&&e.text().then(function(e){n=e}),a||(a=!0,y(r,e.status,t,n),S(n))})["catch"](function(e){a||(a=!0,y(r,0,{}))}),i&&!a&&(a=!0,y(r,200,{})),!a&&0<e.timeout&&E._setTimeoutOverride(function(){a||(a=!0,y(r,500,{}))},e.timeout)}function s(e,i,n){var t=e.urlString;function a(e,n,t){return!e[t]&&n&&n.getResponseHeader&&(n=n.getResponseHeader(t))&&(e[t]=ne(n)),e}function r(e,n){var t,r,o;y(i,e.status,(o={},(e=e).getAllResponseHeaders?(t=e.getAllResponseHeaders(),r={},xe(t)&&Y(ne(t).split(/[\r\n]+/),function(e){var n,t;e&&(-1!=(t=e.indexOf(": "))?(n=ne(e.substring(0,t)).toLowerCase(),t=ne(e.substring(1+t)),r[n]=t):r[ne(e)]=1)}),r):(o=a(o,e,In),o=a(o,e,En),a(o,e,"kill-duration-seconds"))),n)}n&&e.disableXhrSync&&(n=!1),o=bn,t=t,u=g,n=n,l=e.timeout,s=!0,void 0===n&&(n=!1),c=new XMLHttpRequest,s&&d(c,gn,s),u&&d(c,vn,u),c.open(o,t,!n),u&&d(c,vn,u),!n&&l&&d(c,hn,l);var o,u,s,l,c,f=c;function d(e,n,t){try{e[n]=t}catch(r){}}$(e.headers,function(e,n){f.setRequestHeader(e,n)}),f.onload=function(){var e=Wn(f);r(f,e),S(e)},f.onerror=function(){r(f)},f.ontimeout=function(){r(f)},f.send(e.data)}function y(e,n,t,r){try{e(n,t,r)}catch(o){E.diagLog().throwInternal(Q.WARNING,dn.SendPostOnCompleteFailure,Ue(o))}}function l(e,n,t){var r=200,o=e._thePayload,i=e.urlString+jn;try{var a,u=De();u.sendBeacon(i,e.data)||(o?(a=[],Y(o.batches,function(e){if(a&&e&&0<e.count()){for(var n=e.events(),t=0;t<n.length;t++)if(!u.sendBeacon(i,q.getEventBlob(n[t]))){a.push(e.split(t));break}}else a.push(e.split(0))}),x(a,8003,o.sendType,!0)):r=0)}catch(s){E.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+s),r=0}finally{y(n,r,{},"")}}function m(e){return 2===e||3===e}function r(e){return j&&m(e)?2:e}function o(){return!k&&B<e}function t(){var e=D;return D=[],e}function d(e,n,t){return e&&0<e.length&&!k&&I[n]&&q&&(0!==n||o()&&(0<t||F.allowRequestSending()))}function v(e){var t={};return e&&Y(e,function(e,n){t[n]={iKey:e.iKey(),evts:e.events()}}),t}function T(a,u,s,l,c){if(a&&0!==a.length)if(k)x(a,1,l);else{l=r(l);try{var e=a,f=0!==l;ae(P,function(){return"HttpManager:_sendBatches"},function(e){e&&(a=a.slice(0));for(var n=[],t=null,r=se(),e=I[l]||(f?I[1]:I[0]),o=(j||m(l)||e&&3===e._transport)&&!N&&O&&Ve();d(a,l,u);){var i=a.shift();i&&0<i.count()&&(M.isTenantKilled(i.iKey())?n.push(i):(t=t||q.createPayload(u,s,f,o,c,l),q.appendPayload(t,i,w)?null!==t.overflow&&(a=[t.overflow].concat(a),t.overflow=null,h(t,r,se(),c),r=se(),t=null):(h(t,r,se(),c),r=se(),a=[i].concat(a),t=null)))}t&&h(t,r,se(),c),0<a.length&&(D=a.concat(D)),x(n,8004,l)},function(){return{batches:v(e),retryCount:u,isTeardown:s,isSynchronous:f,sendReason:c,useSendBeacon:m(l),sendType:l}},!f)}catch(n){E.diagLog().throwInternal(Q.WARNING,dn.CannotSerializeObject,"Unexpected Exception sending batch: "+Ue(n))}}}function C(e,n,t){e[n]=e[n]||{},e[n][E.identifier]=t}function h(g,u,s,v){var l,c,f,d,h;g&&g.payloadBlob&&0<g.payloadBlob.length&&(l=!!p.sendHook,c=I[g.sendType],!m(g.sendType)&&g.isBeacon&&2===g.sendReason&&(c=I[2]||I[3]||c),d=U,!g.isBeacon&&3!==c._transport||(d=!1),f=function(e,n){var t={url:A,hdrs:{},useHdrs:!1},r=(t.hdrs=mn(t.hdrs,H),t.useHdrs=0<Ie(t.hdrs).length,Qn(t,"client-id","NO_AUTH",n),Qn(t,"client-version","1DS-Web-JS-3.1.11",n),""),e=(Y(e.apiKeys,function(e){0<r.length&&(r+=","),r+=e}),Qn(t,"apikey",r,n),Qn(t,"upload-time",te().toString(),n),function(e){for(var n=0;n<e.batches.length;n++){var t=e.batches[n].Msfpc();if(t)return encodeURIComponent(t)}return""}(e));ue(e)&&(t.url+="&ext.intweb.msfpc="+e),F.shouldAddClockSkewHeaders()&&Qn(t,"time-delta-to-apply-millis",F.getClockSkewHeaderValue(),n),P.getWParam&&0<=(e=P.getWParam())&&(t.url+="&w="+e);for(var o=0;o<K.length;o++)t.url+="&"+K[o].name+"="+K[o].value;return t}(g,d),d=d||f.useHdrs,h=se(),ae(P,function(){return"HttpManager:_doPayloadSend"},function(){for(var e=0;e<g.batches.length;e++)for(var n=g.batches[e].events(),t=0;t<n.length;t++){var r,o=n[t];z&&(C(r=o.timings=o.timings||{},"sendEventStart",h),C(r,"serializationStart",u),C(r,"serializationCompleted",s)),0<o[zn]?o[zn]++:o[zn]=1}x(g.batches,1e3+(v||0),g.sendType,!0);var i={data:g.payloadBlob,urlString:f.url,headers:f.hdrs,_thePayload:g,_sendReason:v,timeout:_},a=(J(L)||(i.disableXhrSync=!!L),d&&(Xn(i.headers,wn)||(i.headers[wn]="no-cache, no-store"),Xn(i.headers,Rn)||(i.headers[Rn]=xn)),null);c&&(a=function(e){F.firstRequestSent();var n=function(e,n){var t,r,o=g,i=v,a=9e3,u=null,s=!1,l=!1;try{var c,f=!0;if(typeof e!==W){if(n&&(F.setClockSkew(n[In]),d=n[En]||n["kill-duration-seconds"],Y(M.setKillSwitchTenants(n["kill-tokens"],d),function(n){Y(o.batches,function(e){e.iKey()===n&&(u=u||[],e=e.split(0),o.numEvents-=e.count(),u.push(e))})})),200==e||204==e)return void(a=200);(!Hn.shouldRetryForStatus(e)||o.numEvents<=0)&&(f=!1),a=9e3+e%1e3}f&&(a=100,c=o.retryCnt,0===o.sendType&&(c<R?(s=!0,b(function(){0===o.sendType&&B--,T(o.batches,c+1,o.isTeardown,j?2:o.sendType,5)},j,Hn.getMillisToBackoffForRetry(c))):(l=!0,j&&(a=8001))))}finally{if(!s){F.setClockSkew();var n=o,d=a,e=i,f=l;try{f&&E._backOffTransmission(),200===d&&(f||n.isSync||E._clearBackOff(),t=n.batches,z&&(r=se(),Y(t,function(e){var n;e&&0<e.count()&&(e=e.events(),n=r,z&&Y(e,function(e){C(e.timings=e.timings||{},"sendEventCompleted",n)}))}))),x(n.batches,d,n.sendType,!0)}finally{0===n.sendType&&(B--,5!==e&&p.sendQueuedRequests(n.sendType,e))}}x(u,8004,o.sendType)}},t=g.isTeardown||g.isSync;try{c.sendPOST(e,n,t),p.sendListener&&p.sendListener(i,e,t,g.isBeacon)}catch(r){E.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+Ue(r)),y(n,0,{})}}),ae(P,function(){return"HttpManager:_doPayloadSend.sender"},function(){var n,t;a&&(0===g.sendType&&B++,l&&!g.isBeacon&&3!==c._transport?(n={data:i.data,urlString:i.urlString,headers:mn({},i.headers),timeout:i.timeout,disableXhrSync:i.disableXhrSync},t=!1,ae(P,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{p.sendHook(n,function(e){t=!0,N||e._thePayload||(e._thePayload=e._thePayload||i._thePayload,e._sendReason=e._sendReason||i._sendReason),a(e)},g.isSync||g.isTeardown)}catch(e){t||a(i)}})):a(i))})},function(){return{thePayload:g,serializationStart:u,serializationCompleted:s,sendReason:v}},g.isSync)),g.sizeExceed&&0<g.sizeExceed.length&&x(g.sizeExceed,8003,g.sendType),g.failedEvts&&0<g.failedEvts.length&&x(g.failedEvts,8002,g.sendType)}function b(e,n,t){n?e():E._setTimeoutOverride(e,t)}function S(e){var n=p._responseHandlers;try{for(var t,r=0;r<n.length;r++)try{n[r](e)}catch(o){E.diagLog().throwInternal(Q.CRITICAL,dn.PostResponseHandler,"Response handler failed: "+o)}e&&ue((t=JSON.parse(e)).webResult)&&ue(t.webResult[_n])&&f.set("MSFPC",t.webResult[_n],31536e3)}catch(i){}}function x(n,t,r,e){var o,i,a;n&&0<n.length&&c&&(o=c[ue(a=Un[t])||(a="oth",9e3<=t&&t<=9999?a="rspFail":8e3<=t&&t<=8999?a=Sn:1e3<=t&&t<=1999&&(a="send")),a])&&ae(P,function(){return"HttpManager:_sendBatchesNotification"},function(){b(function(){try{o.call(c,n,t,i,r)}catch(e){E.diagLog().throwInternal(Q.CRITICAL,dn.NotificationException,"send request notification failed: "+e)}},e||i,0)},function(){return{batches:v(n),reason:t,isSync:i,sendSync:e,sendType:r}},!(i=0!==r))}p.initialize=function(e,n,t,r,o){A=e+A,U=!J((o=o||{}).avoidOptions)&&!o.avoidOptions,f=(P=n).getCookieMgr(),z=!P.config.disableEventTimings;var i,e=!!P.config.enableCompoundKey,n=(E=t,o.valueSanitizer),t=o.stringifyObjects,n=(J(o.enableCompoundKey)||(e=!!o.enableCompoundKey),_=o.xhrTimeout,L=o.disableXhrSync,O=!je(),q=new Bn(P,n,t,e),r),t=o.alwaysUseXhrOverride?r:null,e=o.alwaysUseXhrOverride?r:null;r||(N=!1,(i=typeof location===V&&location?location:ie(Ae))&&i.protocol&&"file:"==i.protocol.toLowerCase()&&(g=!1),i=[],i=je()?[2,1]:[1,2,3],(o=o.transports)&&(we(o)?i=[o].concat(i):Z(o)&&(i=o.concat(i))),r=a(i,!1),n=a(i,!0),r||E.diagLog().warnToConsole("No available transport to send events")),(o={})[0]=r,o[1]=n||a([1,2,3],!0),o[2]=t||a([3,2],!0)||n||a([1],!0),o[3]=e||a([2,3],!0)||n||a([1],!0),I=o},p._getDbgPlgTargets=function(){return[I[0],M,q,I]},p.addQueryStringParameter=function(e,n){for(var t=0;t<K.length;t++)if(K[t].name===e)return void(K[t].value=n);K.push({name:e,value:n})},p.addHeader=function(e,n){H[e]=n},p.canSendRequest=function(){return o()&&F.allowRequestSending()},p.sendQueuedRequests=function(e,n){J(e)&&(e=0),j&&(e=r(e),n=2),d(D,e,0)&&T(t(),0,!1,e,n||0)},p.isCompletelyIdle=function(){return!k&&0===B&&0===D.length},p.setUnloading=function(e){j=e},p.addBatch=function(e){if(e&&0<e.count()){if(M.isTenantKilled(e.iKey()))return!1;D.push(e)}return!0},p.teardown=function(){0<D.length&&T(t(),0,!0,2,2)},p.pause=function(){k=!0},p.resume=function(){k=!1,p.sendQueuedRequests(0,4)},p.sendSynchronousBatch=function(e,n,t){e&&0<e.count()&&(G(n)&&(n=1),j&&(n=r(n),t=2),T([e],0,!1,n,t||0))}})},Zn=o?window:undefined,le="eventsDiscarded",Yn="overrideInstrumentationKey",et="maxEventRetryAttempts",nt="maxUnloadEventRetryAttempts";function tt(){var S,x,w,R,E,I,e=Jn.call(this)||this,P=(e.identifier="PostChannel",e.priority=1011,!(e.version="3.1.11")),_=[],L=null,A=!1,M=0,k=500,F=0,O=1e4,B={},t=Cn,N=null,K=null,H=0,D=0,q={},z=-1,j=!0,U=!1,V=6,W=2;return X(tt,e,function(s,l){function c(e){"beforeunload"!==(e||Ne().event).type&&(U=!0,w.setUnloading(U)),d(2,2)}function f(e){U=!1,w.setUnloading(U)}function o(e,n){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=1),e.ext&&e.ext.trace&&delete e.ext.trace,e.ext&&e.ext.user&&e.ext.user.id&&delete e.ext.user.id,j&&(e.ext=re(e.ext),e.baseData&&(e.baseData=re(e.baseData)),e.data&&(e.data=re(e.data))),e.sync)if(H||A)e.latency=3,e.sync=!1;else if(w)return j&&(e=re(e)),w.sendSynchronousBatch(Mn.create(e.iKey,[e]),!0===e.sync?1:e.sync,3);var t=e.latency,r=F,o=O,i=(4===t&&(r=M,o=k),!1);r<o?i=!h(e,n):(r=1,o=20,4===t&&(r=4,o=1),i=!0,function(e,n,t,r){for(;t<=n;){var o=g(e,n,!0);if(o&&0<o.count()){var o=o.split(0,r),i=o.count();if(0<i)return 4===t?M-=i:F-=i,C(le,[o],5),1}t++}return p(),0}(e.iKey,e.latency,r,o)&&(i=!h(e,n))),i&&T(le,[e],5)}function i(e,n,t){y(e,n,t),w.sendQueuedRequests(n,t)}function a(){0<=z&&y(z,0,I)&&w.sendQueuedRequests(0,I),0<M&&!K&&!A&&0<=(e=B[t][2])&&(K=u(function(){K=null,i(4,0,1),a()},e));var e=B[t][1];!N&&!L&&0<=e&&!A&&(0<F?N=u(function(){N=null,i(0===D?3:1,0,1),D++,D%=2,a()},e):D=0)}function u(e,n){0===n&&H&&(n=1);var t=1e3;return H&&(t=Hn.getMillisToBackoffForRetry(H-1)),s._setTimeoutOverride(e,n*t)}function r(){null!==N&&(s._clearTimeoutOverride(N),N=null,D=0)}function d(e,n){r(),L&&(s._clearTimeoutOverride(L),L=null),A||i(1,e,n)}function g(e,n,t){var r=q[n],n=(r=r||q[n=1]).iKeyMap[e];return!n&&t&&(n=Mn.create(e),r.batches.push(n),r.iKeyMap[e]=n),n}function v(e,n){w.canSendRequest()&&!H&&(n=0<R&&R<F||n)&&null==L&&s.flush(e,null,20)}function h(e,n){var t=(e=j?re(e):e).latency,r=g(e.iKey,t,!0);return r.addEvent(e)&&(4!==t?(F++,n&&0===e.sendAttempt&&v(!e.sync,0<E&&r.count()>=E)):M++,1)}function p(){for(var t=0,r=0,e=1;e<=4;e++)!function(n){var e=q[n];e&&e.batches&&Y(e.batches,function(e){4===n?t+=e.count():r+=e.count()})}(e);F=r,M=t}function y(r,e,n){var o=!1,t=0===e;return!t||w.canSendRequest()?ae(s.core,function(){return"PostChannel._queueBatches"},function(){for(var n=[],t=4;r<=t;){var e=q[t];e&&e.batches&&0<e.batches.length&&(Y(e.batches,function(e){w.addBatch(e)?o=o||e&&0<e.count():n=n.concat(e.events()),4===t?M-=e.count():F-=e.count()}),e.batches=[],e.iKeyMap={}),t--}0<n.length&&T(le,n,4),o&&r<=z&&(z=-1,I=0)},function(){return{latency:r,sendType:e,sendReason:n}},!t):(z=0<=z?Math.min(z,r):r,I=Math.max(I,n)),o}function n(){B={REAL_TIME:[2,1,0],NEAR_REAL_TIME:[6,3,0],BEST_EFFORT:[18,9,0]}}function m(e,n){var t=s._notificationManager||{},r=t[e];if(r)try{r.apply(t,n)}catch(o){s.diagLog().throwInternal(Q.CRITICAL,dn.NotificationException,e+" notification failed: "+o)}}function T(e,n){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];n&&0<n.length&&m(e,[n].concat(t))}function C(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];e&&0<e.length&&Y(e,function(e){e&&0<e.count()&&m(n,[e.events()].concat(t))})}function b(){E=S&&S.disableAutoBatchFlushLimit?0:Math.max(1500,O/6)}n(),q[4]={batches:[],iKeyMap:{}},q[3]={batches:[],iKeyMap:{}},q[2]={batches:[],iKeyMap:{}},q[1]={batches:[],iKeyMap:{}},b(),w=new $n(500,2,1,{requeue:function(e,n){var t=[],r=U?W:V;Y(e,function(e){e&&0<e.count()&&Y(e.events(),function(e){e&&(e.sync&&(e.latency=4,e.sync=!1),e.sendAttempt<r?(Tn(e,s.identifier),o(e,!1)):t.push(e))})}),0<t.length&&T(le,t,1),U&&d(2,2)},send:function(e,n,t){e&&0<e.length&&m("eventsSendRequest",[1e3<=n&&n<=1999?n-1e3:0,!0!==t])},sent:function(e,n){C("eventsSent",e,n),a()},drop:function(e,n){C(le,e,8e3<=n&&n<=8999?n-8e3:0)},rspFail:function(e){C(le,e,1),a()},oth:function(e,n){C(le,e,0),a()}}),s._getDbgPlgTargets=function(){return[w]},s.initialize=function(i,a,u){ae(a,function(){return"PostChannel:initialize"},function(){var n,e=a,t=(l.initialize(i,a,u),s.setInitialized(!1),s._getTelCtx()),t=(i.extensionConfig[s.identifier]=i.extensionConfig[s.identifier]||{},S=t.getExtCfg(s.identifier),s._setTimeoutOverride=S.setTimeoutOverride||setTimeout.bind(Zn),s._clearTimeoutOverride=S.clearTimeoutOverride||clearTimeout.bind(Zn),j=!S.disableOptimizeObj&&!!ie("chrome"),n=e.getWParam,e.getWParam=function(){var e=0;return S.ignoreMc1Ms0CookieProcessing&&(e|=2),e|n()},0<S.eventsLimitInMem&&(O=S.eventsLimitInMem),0<S.immediateEventLimit&&(k=S.immediateEventLimit),0<S.autoFlushEventsLimit&&(R=S.autoFlushEventsLimit),S.disableXhrSync,we(S[et])&&(V=S[et]),we(S[nt])&&(W=S[nt]),b(),S.httpXHROverride&&S.httpXHROverride.sendPOST&&(x=S.httpXHROverride),ue(i.anonCookieName)&&w.addQueryStringParameter("anoncknm",i.anonCookieName),w.sendHook=S.payloadPreprocessor,w.sendListener=S.payloadListener,S.overrideEndpointUrl||i.endpointUrl),e=(s._notificationManager=i.extensionConfig.NotificationManager,w.initialize(t,s.core,s,x,S),i.disablePageUnloadEvents||[]);fn(c,e),function r(t,e){var n=!1;return e&&-1!==ee(e,sn)||(n=cn(sn,t)),!(n=(!e||-1===ee(e,un))&&cn(un,function(e){var n=Ke();t&&n&&"hidden"===n.visibilityState&&t(e)})||n)&&e?r(t):n}(c,e),function o(t,e){var n=!1;return e&&-1!==ee(e,ln)||(n=cn(ln,t)),!(n=(!e||-1===ee(e,un))&&cn(un,function(e){var n=Ke();t&&n&&"visible"===n.visibilityState&&t(e)})||n)&&e?o(t):n}(f,i.disablePageShowEvents),s.setInitialized(!0)},function(){return{coreConfig:i,core:a,extensions:u}})},s.processTelemetry=function(e,n){Tn(e,s.identifier);var t=(n=s._getTelCtx(n)).getExtCfg(s.identifier),r=!!S.disableTelemetry;(r=t?r||!!t.disableTelemetry:r)||P||(S[Yn]&&(e.iKey=S[Yn]),t&&t[Yn]&&(e.iKey=t[Yn]),o(e,!0),U?d(2,2):a()),s.processNext(e,n)},s.setEventQueueLimits=function(e,n){O=0<e?e:1e4,R=0<n?n:0,b();var t=e<F;if(!t&&0<E)for(var r=1;!t&&r<=3;r++){var o=q[r];o&&o.batches&&Y(o.batches,function(e){e&&e.count()>=E&&(t=!0)})}v(!0,t)},s.teardown=function(){d(2,2),P=!0,w.teardown()},s.pause=function(){r(),A=!0,w.pause()},s.resume=function(){A=!1,w.resume(),a()},s.addResponseHandler=function(e){w._responseHandlers.push(e)},s._loadTransmitProfiles=function(e){r(),n(),t=Cn,a(),$(e,function(e,n){var t,r=n.length;2<=r&&(t=2<r?n[2]:0,n.splice(0,r-2),n[1]<0&&(n[0]=-1),0<n[1]&&0<n[0]&&(r=n[0]/n[1],n[0]=Math.ceil(r)*n[1]),0<=t&&0<=n[1]&&t>n[1]&&(t=n[1]),n.push(t),B[e]=n)})},s.flush=function(e,n,t){void 0===e&&(e=!0),A||(r(),t=t||1,e?(y(1,0,t),p(),null==L?L=u(function(){!function r(e,n){i(1,0,n),function t(e){w.isCompletelyIdle()?e():L=u(function(){t(e)},.25)}(function(){e&&e(),0<_.length?L=u(function(){return r(_.shift(),n)},0):(L=null,0<F&&a())})}(n,t)},0):_.push(n)):(i(1,1,t),null!==n&&n!==undefined&&n()))},s.setMsaAuthTicket=function(e){w.addHeader(Pn,e)},s.hasEvents=function(){return 0<F},s._setTransmitProfile=function(e){t!==e&&B[e]!==undefined&&(r(),t=e,a())},s._backOffTransmission=function(){H<4&&(H++,r(),a())},s._clearBackOff=function(){H&&(H=0,r(),a())}}),e}function rt(){this.constructor=Gn}Gn=tt,typeof(n=Jn=i)!==c&&null!==n&&S("Class extends value "+n+" is not a constructor or null"),x(Gn,n),Gn[a]=(rt[a]=n[a],new rt);var l=tt,o=(e.BE_PROFILE="BEST_EFFORT",e.NRT_PROFILE="NEAR_REAL_TIME",e.PostChannel=l,e.RT_PROFILE=Cn,e),i="__esModule",n={value:!0},l=Object.defineProperty;if(l)try{return void l(o,i,n)}catch(ct){}typeof n.value!==undefined&&(o[i]=n.value)};"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).oneDS=e.oneDS||{});
//# sourceMappingURL=ms.post-3.1.11.min.js.map
